/*
Copyright (c) 2011 RAMP Holdings, Inc.

Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
*/
(function(){var c=jQuery,f=function(d,a){if(!(this instanceof f))return new f(d,a);this._plugins=[];var b=f.layout(d);this.target=c(d).get(0);this.dom=b.base;this.video=f.proxy.getProxyObject(b.stage);this.dispatcher=f.dispatcher(this.video);this.playlist(a)};f.addPlugin=function(d,a){var b=f.prototype;if(b[d])throw"keyword unavailable: "+d;b[d]=function(){this._plugins?this._plugins.push({name:d,args:arguments,fn:a}):a.apply(this,arguments);return this}};f.addPlayer=function(d,a){var b=f.prototype;
if(b[d])throw"keyword unavailable: "+d;b[d]=function(){this.player(a.apply(this,arguments));return this}};f.prototype={player:function(d){f.proxy.proxyPlayer(d,this.video);this.currentPlayer=d;return this},load:function(d){var a=this;c(this._plugins).each(function(b,e){a[e.name]=e.fn.apply(a,e.args)});this._plugins=null;this.dispatcher.dispatch("ready");d&&this.playlist.queue(d);return this}};window.MetaPlayer=f;window.MPF=f;window.Ramp=f})();
(function(){var c=jQuery,f={cssPrefix:"mp"};MetaPlayer.layout=function(d,a){this.config=c.extend(!0,{},f,a);this._iOS=/iPad|iPhone|iPod/i.test(navigator.userAgent);var b=c(d),d=b.get(0),e,g=b.find(".mp-video"),k=b.find("video"),h=null!=d.currentTime;h?(e=c("<div></div>").addClass("metaplayer").appendTo(b.parent()),e.width(b.width()),e.height(b.height())):e=b;e.addClass("metaplayer");0==g.length&&(g=c("<div></div>").addClass("mp-video"),g.appendTo(e));0<k.length&&g.append(k);h&&g.append(b);return{base:e.get(0),
stage:g.get(0)}}})();
(function(){var c=jQuery,f={applySources:!0,selectSource:!0,autoAdvance:!0,linkAdvance:!1,autoPlay:!0,autoBuffer:!0,related:!0,loop:!1},d=function(a,b){if(!(this instanceof d))return new d(a,b);this.config=c.extend({},f,b);this.video=a;this._haveRelated=!1;this._tracks=[];this._index=0;this.loop=this.config.loop;this.autoplay=this.config.autoPlay;this.preload=this.config.autoBuffer;this.advance=this.config.autoAdvance;this.linkAdvance=this.config.linkAdvance;this.dispatcher=MetaPlayer.dispatcher(a);this._addDataListeners(this.video);
this._addMediaListeners(this.video)};MetaPlayer.playlist=function(a,b){return d(c(a).get(0),b)};MetaPlayer.addPlugin("playlist",function(a){return MetaPlayer.playlist(this.video,a)});d.prototype={index:function(a){a=this._resolveIndex(a);if(null!=a)this._index=a,this.load(this.track());return this._index},queue:function(a){a instanceof Array||(a=[a]);var b=0==this._tracks.length,e=this;c(a).each(function(b,a){e._addTrack(a,!0)});this.dispatcher.dispatch("playlistchange");b&&this.load(this.track())},
load:function(a){this.video.pause();this.dispatcher.dispatch("trackchange",a)&&this._setSrc(a)},empty:function(){this._tracks=[];this._index=0;this.dispatcher.dispatch("playlistchange");this.dispatcher.dispatch("trackchange")},next:function(){var a=this._index+1,b=this.track(a);if(this.linkAdvance&&(b=b.link||b.linkURL)){window.top.location=b;return}this.index(a)},previous:function(){this.index(this._index-1)},track:function(a){void 0===a&&(a=this.index());return this._tracks[this._resolveIndex(a)]},
nextTrack:function(){return this.track(this._index+1)},tracks:function(){return this._tracks},_addTrack:function(a,b){this._tracks.push(a);b||this.dispatcher.dispatch("playlistchange")},_resolveIndex:function(a){if(null==a)return null;var b=this.tracks();0>a&&(a=b.length+a);this.loop&&(a%=b.length);return a>=b.length||0>a?null:a},_addDataListeners:function(a){a.listen("metadata",this._onMetaData,this);a.listen("transcodes",this._onTranscodes,this);a.listen("related",this._onRelated,this)},_addMediaListeners:function(){var a=
this;c(this.video).bind("ended error",function(){a._onEnded()})},_onMetaData:function(a,b){var e=this.index();"string"==typeof this._tracks[e]&&(this._tracks[e]=b)},_onRelated:function(a,b){if(!this._haveRelated&&this.config.related)this.queue(b),this._haveRelated=!0},_onTranscodes:function(a,b){var e=this,g=this.video;this.transcodes=b;var d=[],f=[];if(this.config.selectSource){c.each(b,function(b,a){g.appendChild(e._createSource(a.url,a.type));var c=g.canPlayType(a.type);c&&("probably"==c?d.push(a.url):
f.push(a.url))});var i=d.shift()||f.shift();i&&this._setSrc(i)}},_setSrc:function(a){this.video.src=a;this.video.autoplay||0<this.index()?this.video.play():this.video.preload&&this.video.load()},_createSource:function(a,b){return c("<source>").attr("type",b||"").attr("src",a)[0]},_onEnded:function(){this.advance&&(this.index()==this.tracks().length-1&&this.dispatcher.dispatch("playlistComplete"),this.next())}}})();
(function(){var c=function(f){if(f&&f.dispatcher instanceof c)return f.dispatcher;if(!(this instanceof c))return new c(f);this._listeners={};this.attach(f)};Ramp.dispatcher=c;c.Event=function(){this.defaultPrevented=this.cancelBubble=!1};c.Event.prototype={initEvent:function(c,d,a){this.type=c;this.cancelable=a},stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){if(this.cancelable)this.defaultPrevented=!0}};c.prototype={attach:function(c){if(c)c.addEventListener?MetaPlayer.proxy.proxyFunction("addEventListener removeEventListener dispatchEvent",
c,this):MetaPlayer.proxy.proxyFunction("addEventListener removeEventListener dispatchEvent",this,c),MetaPlayer.proxy.proxyFunction("listen forget dispatch",this,c),c.dispatcher=this},listen:function(c,d,a){this.addEventListener(c,function(b){d.call(a,b,b.data)})},forget:function(c,d){this.removeEventListener(c,d)},dispatch:function(c,d){var a=this.createEvent();a.initEvent(c,!0,!0);a.data=d;return this.dispatchEvent(a)},addEventListener:function(c,d){this._listeners[c]||(this._listeners[c]=[]);this._listeners[c].push(d)},
removeEventListener:function(c,d){var a=this._listeners[c]||[],b;for(b=a.length-1;0<=b;b--)a[b]==d&&a.splice(b,1)},createEvent:function(f){return document.createEvent?document.createEvent(f||"Event"):new c.Event},dispatchEvent:function(c){for(var d=this._listeners[c.type]||[],a=0;a<d.length&&!c.cancelBubble;a++)d[a].call(d[a].scope||this,c,c.data);return!c.defaultPrevented}}})();
(function(){MetaPlayer.format={seconds:function(c){var f=function(b,a){for(var c=""+b;c.length<a;)c="0"+c;return c},d=Math.floor(c/3600),a=Math.floor(c%60),c=[f(Math.floor(c%3600/60),2),f(a,2)];d&&c.unshift(d);return c.join(":")},replace:function(c,f){return c.replace(/\{\{(\w+)\}\}/g,function(c,a){var b;if(f[a]instanceof Function)b=f[a](f);else if(null!=f[a])b=f[a];else return"{!!!"+a+"!!!}";return MetaPlayer.format.replace(b.toString(),f)})}}})();
(function(){var c=jQuery,f={proxyProperty:function(d,a,b){c.each(d.split(/\s+/g),function(e,c){f.mapProperty(c,b,a)})},proxyFunction:function(d,a,b){c.each(d.split(/\s+/g),function(e,c){b[c]=function(){return a[c].apply(a,arguments)}})},proxyEvent:function(d,a,b){b.addEventListener||Ramp.dispatcher(b);c.each(d.split(/\s+/g),function(e,d){c(a).bind(d,function(a){if(b.dispatch)b.dispatch(a.type);else{var e=document.createEvent("Event");e.initEvent(a.type,!1,!1);b.dispatchEvent(e)}})})},mapProperty:function(d,
a,b){b||(b=a);c.each(d.split(/\s+/g),function(e,c){var d=void 0==b[c]?"_"+c:c,h;h=b[d]instanceof Function?function(){return b[d].apply(b,arguments)}:function(a){void 0!==a&&(b[d]=a);return b[d]};f.define(a,c,{get:h,set:h})})},define:function(c,a,b){try{return Object.defineProperty(c,a,b)}catch(e){}c.__defineGetter&&b.get&&c.__defineGetter__(a,b.get);b.set&&c.__defineSetter__&&c.__defineSetter__(a,b.set)},getProxyObject:function(c){c||(c=document.createElement("div"));try{return Object.defineProperty(c,
"__proptest",{}),c}catch(a){}c={parentNode:c.parentNode};try{return Object.defineProperty(c,"__proptest",{}),c}catch(b){}throw"Object.defineProperty not defined";},proxyPlayer:function(c,a){var b=Ramp.proxy.getProxyObject(a);f.mapProperty("duration currentTime volume muted seeking seekable paused played controls autoplay preload src ended readyState",b,c);f.proxyFunction("load play pause canPlayType",c,b);f.proxyEvent("timeupdate seeking seeked playing play pause loadeddata loadedmetadata canplay loadstart durationchange volumechange ended error",
c,b);return b}};if(!window.Ramp)window.Ramp={};Ramp.proxy=f})();(function(){var c=jQuery;Ramp.script={url:function(f){var d,a=RegExp(f);c("script").each(function(b,e){var g=c(e).attr("src");if(g&&g.match(a))return d=g,!1});return d},base:function(c){c=this.url(c)||"";return c.substr(0,c.lastIndexOf("/")+1)}}})();
(function(){var c=jQuery,f={fixedHeight:!1,minHeight:20,mouseDrag:!1,inertial:!1},d=function(b,a){this.config=c.extend(!0,{},f,a);this.init(b);this.inertiaY=0},a=function(b){return b.pageX||b.originalEvent.touches[0].pageX},b=function(b){return b.pageY||b.originalEvent.touches[0].pageY};d.prototype={init:function(b){this.parent=c(b);var a=this,d=this.parent[0].childNodes;this.body=c("<div></div>").addClass("mp-scroll-body").css("position","relative").bind("resize DOMSubtreeModified size change",function(b){a.onResize(b)}).append(d);
this.scroller=c("<div></div>").css("width","100%").css("height","100%").css("overflow","hidden").addClass("mp-scroll").append(this.body).appendTo(b);this._touchStop=function(b){a.onTouchStop(b)};this._touchMove=function(b){a.onTouchMove(b)};this._knobStop=function(b){a.onKnobStop(b)};this._knobMove=function(b){a.onKnobMove(b)};this.knob=c("<div></div>").css("position","absolute").css("background","black").css("top",0).css("right","-10px").css("border-radius","4px").css("background","#000").css("opacity",
0.4).css("cursor","pointer").width(8).addClass("mp-scroll-knob").appendTo(this.parent).bind("mousedown touchstart",function(b){a.onKnobStart(b)});this.parent.css("position","relative").css("overflow","visible").bind("mousewheel",function(b){a.onScroll(b)}).bind((this.config.mouseDrag?"mousedown":"")+" touchstart",function(b){a.onTouchStart(b)});this.scrollTo(0,0)},onScroll:function(b){this.scrollBy(-(b.originalEvent.wheelDeltaX||b.originalEvent.delta||0),-(b.originalEvent.wheelDeltaY||b.originalEvent.delta||
0));b.preventDefault()},scrollBy:function(b,a,c){var d=this.scroller.scrollLeft(),f=this.scroller.scrollTop();this.scrollTo(d+b,f+a,c)},scrollTop:function(){return this.scroller.scrollTop()},scrollTo:function(b,a,c){var d=this.body.height()-this.parent.height(),f=0<d&&this.scroller.scrollTop()+1>=d;a>d&&(a=d);0>a&&(a=0);this.scroller.stop();if(c&&!f){var l=this;this._scrollY=a;this.scroller.animate({scrollLeft:b,scrollTop:a},c,function(){l._scrollY=null});this.render(c)}else this.scroller.scrollLeft(b),
this.scroller.scrollTop(a),this.render()},render:function(b){if(this.body){var a=this.body.height(),c=this.parent.height(),d=Math.min(c-(a-c)/a*c,c);if(d<this.config.minHeight||this.config.fixedHeight)d=this.config.minHeight;a=(null!=this._scrollY?this._scrollY:this.scroller.scrollTop())/(a-c);a*=c-d;this.knob.toggle(d<c);b?this.knob.stop().animate({height:d,top:a},b):this.knob.stop().height(d).css("top",a)}},onResize:function(){this.render(1E3)},onTouchStart:function(e){this.touching={lastX:this.scroller.scrollLeft(),
lastY:this.scroller.scrollTop()};this.touching.x=a(e)+this.touching.lastX;this.touching.y=b(e)+this.touching.lastY;c(document).bind("mousemove touchmove",this._touchMove).bind("mouseup touchend",this._touchStop);if(this.config.inertial){var d=this;this.inertiaInterval=setInterval(function(){d.onInertiaUpdate()},30)}},onInertiaUpdate:function(){this.inertiaY*=0.9;this.touching||(1>this.inertiaY&&clearInterval(this.inertiaInterval),this.scrollBy(0,this.inertiaY))},onTouchStop:function(){c(document).unbind("mousemove touchmove",
this._touchMove).unbind("mouseup touchend",this._touchStop);this.touching=null},onTouchMove:function(c){var d=-1*(a(c)-this.touching.x),f=-1*(b(c)-this.touching.y);this.inertiaY+=f-this.touching.lastY;this.touching.lastX=d;this.touching.lastY=f;this.scrollTo(d,f);c.stopPropagation();c.preventDefault()},onKnobStart:function(e){this.scroller.stop();this.dragging={x:a(e)-this.knob.position().left,y:b(e)-this.knob.position().top};c(document).bind("mousemove touchmove",this._knobMove).bind("mouseup touchend",
this._knobStop);e.stopPropagation();e.preventDefault()},onKnobStop:function(){c(document).unbind("mousemove touchmove",this._knobMove).unbind("mouseup touchend",this._knobStop);this.dragging=null},onKnobMove:function(c){var d=a(c)-this.dragging.x,c=b(c)-this.dragging.y,f=this.body.height(),h=this.parent.height(),i=this.knob.height();this.scrollTo(d,c/(h-i)*(f-h))}};if(!window.MetaPlayer)window.MetaPlayer={};MetaPlayer.scrollbar=function(b,a){return new d(b,a)}})();
(function(){var c=function(f,d){if(!(this instanceof c))return new c(f,d);var a=this;Ramp.dispatcher(this);this.delay=f;this.count=d||-1;this._counted=0;this._onTimeout=function(){a._counted++;a.dispatcher.dispatch("time",{count:a._counted,remain:a.count-a._counted});0<a.count&&a.count<a._counted+1&&(a.reset(),a.dispatcher.dispatch("complete"))}};Ramp.timer=c;c.prototype={reset:function(){this._counted=0;this.stop()},stop:function(){clearInterval(this._interval);this.running=this._interval=null},
toggle:function(){this.running?this.stop():this.start()},start:function(){if(!this._interval)this.running=(new Date).getTime(),this._interval=setInterval(this._onTimeout,this.delay)}}})();
(function(){var c=jQuery;if(!window.Ramp)window.Ramp={};Ramp.ui={ensureOffsetParent:function(f){var f=c(f).first(),d=f[0];if(!(d.offsetParent===d.parentNode&&d.offsetParent.offsetParent)){var a=c("<div></div>");a.css("position","relative");a.css("top",0);a.css("left",0);a.css("width","100%");a.css("height","100%");d.width&&a.width(d.width);d.height&&a.height(d.height);f.css("width","100%");f.css("height","100%");f.parent().append(a);a.append(f)}}}})();
(function(){var c=jQuery,f={},d=function(a,b){if(!(this instanceof d))return new d(a,b);this.config=c.extend({},f,b);this.dispatcher=MetaPlayer.dispatcher(a);this.dispatcher.attach(this);this.dispatcher.listen("trackchange",this._onTrackChange,this)};if(!window.Ramp)window.Ramp={};MetaPlayer.mrss=function(a){return d(null,a)};MetaPlayer.addPlugin("mrss",function(a){this.service=d(this.video,a)});d.prototype={load:function(a){c.ajax(a,{dataType:"xml",timeout:15E3,context:this,data:{},error:function(b,
c){console.error("Load playlist error: "+c+", url: "+a)},success:function(b){this.setData(this.parse(b))}})},setData:function(a){this._data=a;var b=this.dispatcher;b.dispatch("metadata",a.metadata);b.dispatch("transcodes",a.transcodes);b.dispatch("captions",a.captions);b.dispatch("tags",a.tags);b.dispatch("metaq",a.metaq);b.dispatch("related",a.related)},_onTrackChange:function(a,b){b&&(a.preventDefault(),"string"==typeof b?this.load(b):this.setData(b))},parse:function(a){var b=this,e=[],a=c(a).find("item").toArray();
c.each(a,function(a,c){e.push(b.parseItem(c))});a=e.shift();a.related=e;return a},parseItem:function(a){var b={metadata:{},transcodes:[],tags:[],captions:[],metaq:{},related:[]},a=c(a),e=a.find("media:content, content");c.each(e,function(a,e){var e=c(e),d=e.attr("codec"),f=e.attr("type")+(d?'codec="'+d+'"':"");b.transcodes.push({url:e.attr("url"),fileSize:e.attr("fileSize"),type:f,medium:e.attr("medium"),isDefault:e.attr("isDefault"),expression:e.attr("expression"),bitrate:e.attr("bitrate"),framerate:e.attr("framerate"),
samplingrate:e.attr("samplingrate"),channels:e.attr("channels"),duration:e.attr("duration"),height:e.attr("height"),width:e.attr("width"),lang:e.attr("lang"),codec:d})});b.metadata.title=a.find("media:title, title").text();b.metadata.description=a.find("media:description, description").text()||a.find("]").text();b.metadata.thumbnail=a.find("media:thumbnail, thumbnail").attr("url");return b},search:function(){throw"not implemented";}}})();
(function(){var c=jQuery,f={msQuotes:!0,forceRelative:!1,playlistService:"/device/services/mp2-playlist?e={e}"},d=function(a,b){if(!(this instanceof d))return new d(a,b);this.config=c.extend({},f,b);this.dispatcher=MetaPlayer.dispatcher(a);this.dispatcher.attach(this);this.dispatcher.listen("trackchange",this._onTrackChange,this)};MetaPlayer.ramp=function(a){return d(null,a)};MetaPlayer.addPlugin("ramp",function(a){this.service=d(this.video,a)});d.prototype={_onTrackChange:function(a,b){b&&("string"==
typeof b&&(b=this.parseUrl(b)),b&&b.rampId&&(this.load(b),a.preventDefault()))},load:function(a){"string"==typeof a&&(a=this.parseUrl(a));if(!a.rampId)throw"invalid media id";this.mediaId=a.rampId;if(a.rampHost)this.lastHost=a.rampHost;var b=this.lastHost,e=b+this.config.playlistService.replace(/{e}/,this.mediaId);c.ajax(e,{dataType:"xml",timeout:15E3,context:this,data:{},error:function(b,a){console.error("Load playlist error: "+a+", url: "+e)},success:function(a){a=this.parse(a);a.metadata.host=
b;this.setData(a)}})},setData:function(a){this._data=a;var b=this.dispatcher;b.dispatch("metadata",a.metadata);b.dispatch("transcodes",a.transcodes);b.dispatch("captions",a.captions);b.dispatch("tags",a.tags);b.dispatch("metaq",a.metaq);b.dispatch("related",a.related)},parse:function(a){var b=this,a=c(a).find("par").toArray(),e=this.parseMedia(a.shift());c.each(a,function(a,c){e.related.push(b.parseMedia(c).metadata)});return e},parseMedia:function(a){var b={metadata:{},transcodes:[],tags:[],captions:[],
metaq:{},related:[]},e=c(a).find("video");b.metadata.title=e.attr("title");e.find("metadata meta").each(function(a,e){var d=c(e);b.metadata[d.attr("name")]=d.attr("content")||d.text()});b.transcodes.push({name:"default",type:this.resolveType(e.attr("src")),url:e.attr("src")});c(a).find("metadata[xml\\:id^=transcodes]").find("meta").each(function(a,e){var d=c(e);b.transcodes.push({name:d.attr("name"),type:d.attr("type")||this.resolveType(d.attr("content")),url:d.attr("content")})});c(a).find("seq[xml\\:id^=jumptags]").find("ref").each(function(a,
e){var d={};c(e).find("param").each(function(b,a){var e=c(a);d[e.attr("name")]=e.text()});if(d.timestamps)d.timestamps=d.timestamps.split(",");b.tags.push(d)});c(a).find("seq[xml\\:id^=metaqs]").find("ref").each(function(a,e){var d={};c(e).find("param").each(function(b,a){var e=c(a),f=e.attr("name"),e=self.deSmart(e.text());"code"==f?(f=c.parseJSON(e),c.extend(!0,d,f)):d[f]=e});b.metaq[d.plugin]||(b.metaq[d.plugin]=[]);b.metaq[d.plugin].push(d)});a=c(a).find("smilText");b.captions=this.parseCaptions(a);
return b},search:function(a,b,e){var d=this._data.metadata.searchapi;this.config.forceRelative&&(d=d.replace(/^(.*\/\/[\w.]+)/,""));var f={q:a};a?c.ajax(d,{dataType:"xml",timeout:15E3,context:this,data:f,error:function(b,a){console.error("Load search error: "+a+", url: "+d)},success:function(a){a=this.parseSearch(a);this.dispatch("search",a);b&&b.call(e,a)}}):(a={query:[],results:[]},this.dispatch("search",a),b&&b.call(e,a))},parseSearch:function(a){var a=c(a),b=this,e={query:[],results:[]};a.find("SearchTerms Term").each(function(){e.query.push(b.deSmart(c(this).text()))});
a.find("Snippets Snippet").each(function(a,d){var f=c(d),i={start:f.attr("time"),words:[]},f=f.find("T");c.each(f,function(a,e){var d=c(e);i.words.push({match:Boolean(d.find("MQ").length),start:d.attr("s"),text:b.deSmart(d.text())})});e.results.push(i)});return e},parseCaptions:function(a){var b=this,e=c(a).contents(),d=[],f={text:"",start:0,offset:0},h,i=function(a,e){var j;j=c(a);var i=j.attr("begin");null!=i?j=b.parseSeconds(i):(j=j.attr("next"),j=null!=j?b.parseSeconds(j)+(void 0).start:void 0);
h=f;h.end=j;e&&(h.text+=e);d.push(h);f={text:"",start:j,offset:f.offset+1}};e.each(function(a,c){var d=e[a].data;if(void 0===c.tagName)b.config.msQuotes&&(d=b.deSmart(d)),f.text+=d;else switch(c.tagName){case "smil:clear":case "clear":i(c);break;case "smil:tev":case "tev":i(c);break;case "smil:br":case "br":i(c,"<br />");break;default:throw"unsupported tag";}});f.text&&d.push(f);return d},parseSeconds:function(a){var b=a.substr(-1),c=parseFloat(a);if("s"==b)return c;if("m"==b)return 60*c;if("h"==
b)return 3600*c;b=0;a=a.split(":");for(c=0;c<Math.min(a.length,4);c++)b+=Math.pow(60,c)*parseFloat(a[c]);return b},parseUrl:function(a,b){var c=a.split(":");void 0==b&&(b={});"ramp"!==c[0]?b.url=a:(b.rampHost=c[1],b.rampId=c[2]);return b},deSmart:function(a){return a.replace(/\xC2\x92/,"\u2019")},resolveType:function(a){var b=a.substr(a.lastIndexOf(".")+1);return a.match("www.youtube.com")?"video/youtube":"ogv"==b?"video/ogg":"m3u8"==b?"application/application.vnd.apple.mpegurl":"video/"+b}}})();
(function(){var c=jQuery,f={applySources:!0,selectSource:!0,preload:!0,muted:!1,autoplay:!1,autoAdvance:!0,related:!0,loop:!1,volume:1,controls:!0},d=function(a,b){if(!(this instanceof d))return new d(a,b);this._iOS=/iPad|iPhone|iPod/i.test(navigator.userAgent);this.config=c.extend({},f,b);this._createMarkup(a)};MetaPlayer.html5=function(a,b){return d(a,b).video};MetaPlayer.addPlayer("html5",function(a){return MetaPlayer.html5(this.video,a)});d.prototype={_createMarkup:function(a){var b=c(a),e=b.find("video");
if(b.is("video")||null!=a.currentTime)e=b;0<e.length?this._iOS?(this.video=e.clone(!0,!0).appendTo(e.parent()).get(0),e.remove()):this.video=e.get(0):(a=document.createElement("video"),a.autoplay=this.config.autoplay,a.preload=this.config.preload,a.controls=this.config.controls,a.muted=this.config.muted,a.volume=this.config.volume,this.video=a,b.append(a))}}})();
(function(){var c=jQuery,f=window.flowplayer,d={autoplay:!1,preload:!0,controls:!0,swfUrl:"flowplayer-3.2.7.swf",wmode:"transparent",cssName:"mp-flowplayer",statusThrottleMSec:500,fpConfig:{clip:{scaling:"fit"},canvas:{backgroundColor:"#0000000",backgroundGradient:"none"}}},a=function(b,e){if(!(this instanceof a))return new a(b,e);this.config=c.extend(!0,{},d,e);this.dispatcher=MetaPlayer.dispatcher(b);this._iOS=/iPad|iPhone|iPod/i.test(navigator.userAgent);this.__seeking=null;this.__readyState=0;
this.__ended=!1;this.__paused=!0;this.__duration=NaN;this._pageSetup(b);this.__preload=this.config.preload;this.__autoplay=this.config.autoplay;this.__src="";this._statepoll=Ramp.timer(250);this._statepoll.listen("time",this._onPlayStatePoll,this);this._timeupdater=Ramp.timer(250);this._timeupdater.listen("time",this._onTimeUpdate,this);var f=this;this._flowplayer.onLoad(function(){f._onLoad()});this.video=this.attach(this._flowplayer.getParent())};MetaPlayer.flowplayer=function(b,c){return a(b,c).video};
MetaPlayer.addPlayer("flowplayer",function(b,e){b.getCommonClip||(e=b,b=c("<div></div>").appendTo(this.video));this.flowplayer=a(b,e);return this.flowplayer.video});a.prototype={_pageSetup:function(b){if(b.getCommonClip)this._flowplayer=b,b=this._flowplayer.getCommonClip(),this.preload(Boolean(b.autoBuffering)),this.autoplay(Boolean(b.autoPlay));else{var b=c(b).get(0),a=c.extend(!0,{clip:{autoPlay:!1,autoBuffering:!0}},this.config.fpConfig);this._flowplayer=f(b,{src:this.config.swfUrl,wmode:this.config.wmode},
a)}},_onLoad:function(){if(!this._onLoadFired){this._onLoadFired=!0;var b=this;this._flowplayer.onVolume(function(){b.dispatcher.dispatch("volumechange")});this._flowplayer.onMute(function(){b.dispatcher.dispatch("volumechange")});this._flowplayer.onUnmute(function(){b.dispatcher.dispatch("volumechange")});this._flowplayer.onPlaylistReplace(function(){b.dispatcher.dispatch("playlistChange")});this._flowplayer.onClipAdd(function(){b.dispatcher.dispatch("playlistChange")});this.controls(this.config.controls);
this.__src&&this.src(this.__src);b.dispatcher.dispatch("loadstart");(this.preload()||this.autoplay())&&this.load()}},_addClipListeners:function(b){var a=this;b.onBeforeBegin(function(){return!0});b.onBegin(function(){a._flowplayer.setVolume(100);a._flowplayer.unmute()});b.onStart(function(b){a._setReady();a._setPlaying(!0);if(a._iOS&&!a.__controls)c(a._flowplayer.getParent()).find("video").get(0).controls=!1;a.dispatcher.dispatch("loadeddata");a.__duration=b.duration;a.dispatcher.dispatch("durationchange");
a.dispatcher.dispatch("loadedmetadata")});b.onStop(function(){});b.onFinish(function(){a.__ended=!0;a.__seeking=null;a._setPlaying(!1);a._flowplayer.stop();a.dispatcher.dispatch("ended")});b.onPause(function(){a._setPlaying(!1);a._setReady()});b.onResume(function(){a._setPlaying(!0);a.dispatcher.dispatch("play")});b.onBeforeSeek(function(){a.dispatcher.dispatch("seeking");a.dispatcher.dispatch("timeupdate");if(a.paused())a.dispatcher.dispatch("seeked"),a.__seeking=null});b.onSeek(function(){this.__currentTimeCache=
0;a.__seeking=null;a.paused()||a.dispatcher.dispatch("seeked")})},_setReady:function(){4!=this.__readyState?(this.__readyState=4,this.dispatcher.dispatch("canplay")):(this.dispatcher.dispatch("seeking"),this.dispatcher.dispatch("seeked"))},_setPlaying:function(b){this.__paused=!b;this._statepoll.start()},load:function(){this.preload(!0);if(this.src()&&this._flowplayer.isLoaded())this._flowplayer.getClip(0).update({autoPlay:this.autoplay(),autoBuffer:!0}),window.flashembed.__replaced&&!this.__loaded?
(this._flowplayer.play(0),this.autoplay()&&this._flowplayer.play(0),this.__loaded=!0):this.autoplay()?this._flowplayer.play():this._flowplayer.startBuffering()},play:function(){this.autoplay(!0);this.__paused=!1;this.load()},pause:function(){this._flowplayer.pause()},canPlayType:function(b){var a=null;if(window.flashembed.__replaced){if(!this._video)this._video=document.createElement("video");this._iOS&&b.match(/mpegurl|m3u8/i)?a="probably":this._video.canPlayType&&(a=this._video.canPlayType(b))}else b.match(/mp4|flv|jpg$/)&&
(a="probably");return a},paused:function(){return this.__paused},duration:function(){return this.__duration},seeking:function(){return null!==this.__seeking},ended:function(){return this.__ended},currentTime:function(b){if(void 0!==b){0>b&&(b=0);if(b>this.duration)b=this.duration;this.__seeking=b;this._flowplayer.seek(b)}if(null!==this.__seeking)return this.__seeking;if(!this._flowplayer.isLoaded())return 0;var b=(new Date).getTime(),a=this.__currentTimeCache,c=b-a;if(a&&c<this.config.statusThrottleMSec)return this.__currentTime+
c/1E3;this.__currentTimeCache=b;return this.__currentTime=this._flowplayer.getStatus().time},muted:function(b){void 0!==b&&(b?this._flowplayer.mute():this._flowplayer.unmute());b=this._flowplayer.getStatus();return Boolean(b.muted)},volume:function(b){void 0!==b&&this._flowplayer.setVolume(100*b);return this._flowplayer.getVolume()/100},controls:function(b){if(!this._flowplayer.isLoaded()){if(void 0!==b)this.config.controls=b;return this.config.controls}var a=this._flowplayer.getControls(),d=this._flowplayer.getPlugin("play"),
f=c(this._flowplayer.getParent()).find("video").get(0);if(void 0!==b)(this.__controls=b)?(a&&a.show(),d&&d.show(),f&&(f.controls=!0)):(a&&a.hide(),d&&d.hide(),f&&(f.controls=!1));return this.__controls},preload:function(b){if(void 0!==b)this.__preload=b;return this.__preload},autoplay:function(b){if(void 0!==b)this.__autoplay=b;return this.__autoplay},loop:function(b){if(void 0!==b)this.__loop=b;return this.__loop},src:function(b){if(void 0!==b)this.__src=b,this.__loaded=!1,this.__duration=NaN,b=
this._flowplayer,b.isLoaded()&&(b.setClip({autoPlay:!1,autoBuffering:!1,url:this.__src}),this._addClipListeners(b.getClip(0)));return this.__src},readyState:function(b){if(void 0!==b)this.__readyState=b;return this.__readyState},attach:function(b){b=MetaPlayer.proxy.getProxyObject(b);this.dispatcher.attach(b);MetaPlayer.proxy.proxyPlayer(this,b);return b},_onPlayStatePoll:function(){this._flowplayer.isPlaying()!==this.paused()&&(this._statepoll.reset(),this.paused()?(this.dispatcher.dispatch("pause"),
this._timeupdater.reset()):(this.autoplay(!0),this.dispatcher.dispatch("playing"),this.dispatcher.dispatch("play"),this._timeupdater.start()))},_onTimeUpdate:function(){this.dispatcher.dispatch("timeupdate")}}})();
(function(){var c=jQuery,f={autoplay:!1,preload:!0,controls:!0,chromeless:!1,loop:!1,hd:!0,annotations:!1,modestbranding:!0,related:!1,showinfo:!1,captions:!1,apiUrl:"http://www.youtube.com/apiplayer",videoUrl:"http://www.youtube.com/v/Y7dpJ0oseIA",updateMsec:500},d=window.onYouTubePlayerReady;window.onYouTubePlayerReady=function(b){d&&d.apply(this,arguments);var a=MetaPlayer.youtube.instances[b];if(a)a.onReady()};var a=function(b,d){var g=c.extend(!0,{},f,d);this.video=c(b).get(0);this.apiUrl=g.apiUrl;
this.videoUrl=g.videoUrl;this.__seeking=!1;this.__readyState=0;this.__muted=this.__ended=!1;this.__paused=!0;this.__duration=NaN;this.__currentTime=0;this.__volume=1;this.__loop=g.loop;this.__src="";this.preload=g.preload;this.controls=g.controls;this.autoplay=g.autoplay;this.updateMsec=g.updateMsec;this.apiId="YT"+a.embedCount++ +"T"+(new Date).getTime();this.hd=g.hd;this.annotations=g.annotations;this.modestbranding=g.modestbranding;this.showinfo=g.showinfo;this.related=g.related;this.captions=
g.captions;this.chromeless=g.chromeless;MetaPlayer.proxy.proxyPlayer(this,this.video);this.doEmbed(this.video);this.dispatcher=MetaPlayer.dispatcher(this.video);MetaPlayer.youtube.instances[this.apiId]=this;this.video.player=this};window.MetaPlayer?MetaPlayer.addPlayer("youtube",function(b){var d=c("<div></div>").appendTo(this.video);return(new a(d,b)).video}):window.MetaPlayer={};MetaPlayer.youtube=function(b,c){return(new a(b,c)).video};MetaPlayer.youtube.instances={};a.embedCount=0;a.prototype=
{doEmbed:function(a){var d=this.getEmbedUrl();c(a).empty();c("<div></div>").attr("id",this.apiId).appendTo(this.video);swfobject.embedSWF(d,this.apiId,"100%","100%","8",null,null,{wmode:"transparent",allowScriptAccess:"always"},{id:this.apiId})},getEmbedUrl:function(){return(this.chromeless?this.apiUrl:this.videoUrl)+"?"+c.param({enablejsapi:1,version:3,playerapiid:this.apiId,autohide:0,autoplay:this.autoplay?1:0,controls:this.controls?1:0,fs:1,hd:this.hd?1:0,rel:this.related?1:0,showinfo:this.showinfo?
1:0,iv_load_policy:this.annotations?1:0,cc_load_policy:this.captions?1:1},!0)},getCallbackString:function(a){var c="MetaPlayer.youtube.instances['"+this.apiId+"']";null!=a&&(c=c.concat("."+a));return c},onReady:function(){c(this.video);this.youtube=document.getElementById(this.apiId);this.youtube.playVideo?(this.youtube.addEventListener("onStateChange",this.getCallbackString("onStateChange")),this.startVideo()):this.error="unabled to find youtube player"},onStateChange:function(a){switch(a){case 0:this.__ended=
!0;this.video.dispatch("ended");break;case 1:this.__paused=!1;this.video.dispatch("playing");this.video.dispatch("play");break;case 2:this.__paused=!0;this.video.dispatch("pause");break;case 3:this.startDurationCheck();this.startTimeCheck();break;case 5:this.video.dispatch("canplay"),this.video.dispatch("loadeddata")}},startTimeCheck:function(){var a=this;if(!this._timeCheckInterval)this._timeCheckInterval=setInterval(function(){a.onTimeUpdate()},this.updateMsec),this.updateTime()},stopTimeCheck:function(){clearInterval(this._timeCheckInterval);
this._timeCheckInterval=null},onTimeUpdate:function(){this.updateTime();this.video.dispatch("timeupdate")},updateTime:function(){this.__currentTime=this.youtube.getCurrentTime()},startDurationCheck:function(){var a=this;if(!this.__duration&&!this._durationCheckInterval)this._durationCheckInterval=setInterval(function(){a.onDurationCheck()},this.updateMsec)},onDurationCheck:function(){var a=this.youtube.getDuration();if(0<a)this.__duration=a,this.video.dispatch("loadedmetadata"),this.video.dispatch("durationchange"),
clearInterval(this._durationCheckInterval),this._durationCheckInterval=null},startVideo:function(){if(this.youtube){this.__ended=!1;this.__muted&&this.youtube.mute();this.youtube.setVolume(this.__volume);var a=this.src();if(a){if(4>this.__readyState)this.video.dispatch("loadstart"),this.__readyState=4;a.match(/^http:/)?this.youtube.cueVideoByUrl(a):this.youtube.cueVideoById(a);this.autoplay?this.play():this.preload&&this.load()}}},doSeek:function(a){this.__seeking=!0;this.video.dispatch("seeking");
this.youtube.seekTo(a);this.__currentTime=a;var c=this;setTimeout(function(){c.updateTime();c.__seeking=!1;c.video.dispatch("seeked");c.video.dispatch("timeupdate")},1500)},load:function(){this.preload=!0;this.youtube&&-1==this.youtube.getPlayerState()&&(this.src(),this.youtube.playVideo(),this.youtube.pauseVideo())},play:function(){this.autoplay=!0;this.youtube&&this.youtube.playVideo()},pause:function(){if(!this.youtube)return!1;this.youtube.pauseVideo()},canPlayType:function(a){return Boolean(a.match(/\/youtube$/))},
paused:function(){return this.__paused},duration:function(){return this.__duration},seeking:function(){return this.__seeking},ended:function(){return!this.youtube?!1:0==this.youtube.getPlayerState()},currentTime:function(a){if(!this.youtube)return 0;if(void 0!=a)this.__ended=!1,this.doSeek(a);return this.__currentTime},muted:function(a){if(null!=a){this.__muted=a;if(!this.youtube)return a;a?this.youtube.mute():this.youtube.unMute();this.video.dispatch("volumechange");return a}return this.__muted},
volume:function(a){if(null!=a){this.__volume=a;if(!this.youtube)return a;this.youtube.setVolume(100*a);this.video.dispatch("volumechange")}return this.__volume},src:function(a){if(void 0!==a)this.__src=a,this.startVideo();return this.__src},readyState:function(){return this.__readyState}}})();
