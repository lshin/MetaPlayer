/*
Copyright (c) 2011 RAMP Holdings, Inc.

Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
*/
(function(){var b=function(e,c){if(!(this instanceof b))return new b(e);this._plugins=[];var a=b.layout(e);this.target=$(e).get(0);this.video=b.proxy.getProxyObject(a.stage);this.dispatcher=b.dispatcher(this.video);this.playlist(c)};b.addPlugin=function(e,c){var a=b.prototype;if(a[e])throw"keyword unavailable: "+e;a[e]=function(){this._plugins?this._plugins.push({name:e,args:arguments,fn:c}):c.apply(this,arguments);return this}};b.addPlayer=function(e,c){var a=b.prototype;if(a[e])throw"keyword unavailable: "+
e;a[e]=function(){this.player(c.apply(this,arguments));return this}};b.prototype={player:function(e){b.proxy.proxyPlayer(e,this.video);return this},load:function(b){var c=this;$(this._plugins).each(function(a,d){c[d.name]=d.fn.apply(c,d.args)});this._plugins=null;this.dispatcher.dispatch("ready");b&&this.playlist.queue(b);return this}};window.MetaPlayer=b;window.MPF=b;window.Ramp=b})();
(function(){var b=jQuery,e={cssPrefix:"mp"};MetaPlayer.layout=function(c,a){this.config=b.extend(!0,{},e,a);this._iOS=/iPad|iPhone|iPod/i.test(navigator.userAgent);var d=b(c),f=d.is("video"),i,g=d.find(".mp-video"),h=d.find("video");f?(i=b("<div></div>").addClass("metaplayer").appendTo(d.parent()),i.width(d.width()),i.height(d.height())):i=d;i.addClass("metaplayer");0==g.length&&(g=b("<div></div>").addClass("mp-video"),g.appendTo(i));0<h.length&&g.append(h);f&&g.append(d);return{base:i.get(0),stage:g.get(0)}}})();
(function(){var b=jQuery,e={applySources:!0,selectSource:!0,autoAdvance:!0,autoPlay:!0,autoBuffer:!0,related:!0,loop:!1},c=function(a,d){if(!(this instanceof c))return new c(a,d);this.config=b.extend({},e,d);this.video=a;this._haveRelated=!1;this._tracks=[];this._index=0;this.loop=this.config.loop;this.autoplay=this.config.autoPlay;this.preload=this.config.autoBuffer;this.advance=this.config.autoAdvance;this.dispatcher=MetaPlayer.dispatcher(a);this._addDataListeners(this.video);this._addMediaListeners(this.video)};
MetaPlayer.playlist=function(a,d){return c(b(a).get(0),d)};MetaPlayer.addPlugin("playlist",function(a){return MetaPlayer.playlist(this.video,a)});c.prototype={index:function(a){a=this._resolveIndex(a);if(null!=a)this._index=a,this.load(this.track());return this._index},queue:function(a){a instanceof Array||(a=[a]);var d=0==this._tracks.length,c=this;b(a).each(function(d,a){c._addTrack(a,!0)});this.dispatcher.dispatch("playlistchange");d&&this.load(this.track())},load:function(a){this.video.pause();
this.dispatcher.dispatch("trackchange",a)&&this._setSrc(a)},empty:function(){this._tracks=[];this._index=0;this.dispatcher.dispatch("playlistchange");this.dispatcher.dispatch("trackchange")},next:function(){this.index(this._index+1)},previous:function(){this.index(this._index-1)},track:function(a){void 0===a&&(a=this.index());return this._tracks[this._resolveIndex(a)]},nextTrack:function(){return this.track(this._index+1)},tracks:function(){return this._tracks},_addTrack:function(a,d){this._tracks.push(a);
d||this.dispatcher.dispatch("playlistchange")},_resolveIndex:function(a){if(null==a)return null;var d=this.tracks();0>a&&(a=d.length+a);this.loop&&(a%=d.length);return a>=d.length||0>a?null:a},_addDataListeners:function(a){a.listen("metadata",this._onMetaData,this);a.listen("transcodes",this._onTranscodes,this);a.listen("related",this._onRelated,this)},_addMediaListeners:function(){var a=this;b(this.video).bind("ended error",function(){a._onEnded()})},_onMetaData:function(a,d){var c=this.index();
"string"==typeof this._tracks[c]&&(this._tracks[c]=d)},_onRelated:function(a,d){if(!this._haveRelated&&this.config.related)this.queue(d),this._haveRelated=!0},_onTranscodes:function(a,d){var c=this,e=this.video;this.transcodes=d;var g=[],h=[];b.each(d,function(d,a){e.appendChild(c._createSource(a.url,a.type));var b=e.canPlayType(a.type);b&&("probably"==b?g.push(a.url):h.push(a.url))});var k=g.shift()||h.shift();k&&this._setSrc(k)},_setSrc:function(a){this.video.src=a;this.video.autoplay||0<this.index()?
this.video.play():this.video.preload&&this.video.load()},_createSource:function(a,d){return b("<source>").attr("type",d||"").attr("src",a)[0]},_onEnded:function(){this.advance&&(this.index()==this.tracks().length-1&&this.dispatcher.dispatch("playlistComplete"),this.next())}}})();
(function(){var b=function(e){if(e&&e.dispatcher instanceof b)return e.dispatcher;if(!(this instanceof b))return new b(e);this._listeners={};this.init(e)};Ramp.dispatcher=b;b.Event=function(){this.defaultPrevented=this.cancelBubble=!1};b.Event.prototype={initEvent:function(b,c,a){this.type=b;this.cancelable=a},stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){if(this.cancelable)this.defaultPrevented=!0}};b.prototype={init:function(b){b&&(b.addEventListener?(MetaPlayer.proxy.proxyFunction("addEventListener removeEventListener dispatchEvent",
b,this),MetaPlayer.proxy.proxyFunction("listen forget dispatch",this,b)):this.attach(b))},attach:function(b,c){if(b.addEventListener&&!c)throw"already an event dispatcher";b.addEventListener||MetaPlayer.proxy.proxyFunction("addEventListener removeEventListener dispatchEvent",this,b);MetaPlayer.proxy.proxyFunction("listen forget dispatch",this,b);b.dispatcher=this},_wrap:function(b){var c=this,a=this;return function(){return c[b].apply(a,arguments)}},listen:function(b,c,a){this.addEventListener(b,
function(d){c.call(a,d,d.data)})},forget:function(b,c){this.removeEventListener(b,c)},dispatch:function(b,c){var a=this.createEvent();a.initEvent(b,!0,!0);a.data=c;return this.dispatchEvent(a)},addEventListener:function(b,c){this._listeners[b]||(this._listeners[b]=[]);this._listeners[b].push(c)},removeEventListener:function(b,c){var a=this._listeners[b]||[],d;for(d=a.length-1;0<=d;d--)a[d]==c&&a.splice(d,1)},createEvent:function(e){return document.createEvent?document.createEvent(e||"Event"):new b.Event},
dispatchEvent:function(b){for(var c=this._listeners[b.type]||[],a=0;a<c.length&&!b.cancelBubble;a++)c[a].call(c[a].scope||this,b,b.data);return!b.defaultPrevented}}})();(function(){Ramp.format={seconds:function(b){var e=function(d,a){for(var b=""+d;b.length<a;)b="0"+b;return b},c=Math.floor(b/3600),a=Math.floor(b%60),b=[e(Math.floor(b%3600/60),2),e(a,2)];c&&b.unshift(c);return b.join(":")}}})();
(function(){var b=jQuery,e={proxyProperty:function(c,a,d){b.each(c.split(/\s+/g),function(b,c){e.mapProperty(c,d,a)})},proxyFunction:function(c,a,d){b.each(c.split(/\s+/g),function(b,c){d[c]=function(){return a[c].apply(a,arguments)}})},proxyEvent:function(c,a,d){d.addEventListener||Ramp.dispatcher(d);b.each(c.split(/\s+/g),function(c,i){b(a).bind(i,function(a){if(d.dispatch)d.dispatch(a.type);else{var b=document.createEvent("Event");b.initEvent(a.type,!1,!1);d.dispatchEvent(b)}})})},mapProperty:function(c,
a,d){d||(d=a);b.each(c.split(/\s+/g),function(b,c){var g=void 0==d[c]?"_"+c:c,h;h=d[g]instanceof Function?function(){return d[g].apply(d,arguments)}:function(a){void 0!==a&&(d[g]=a);return d[g]};e.define(a,c,{get:h,set:h})})},define:function(b,a,d){try{return Object.defineProperty(b,a,d)}catch(f){}b.__defineGetter&&d.get&&b.__defineGetter__(a,d.get);d.set&&b.__defineSetter__&&b.__defineSetter__(a,d.set)},getProxyObject:function(b){b||(b=document.createElement("div"));try{return Object.defineProperty(b,
"__proptest",{}),b}catch(a){}b={parentNode:b.parentNode};try{return Object.defineProperty(b,"__proptest",{}),b}catch(d){}throw"Object.defineProperty not defined";},proxyPlayer:function(b,a){var d=Ramp.proxy.getProxyObject(a);e.mapProperty("duration currentTime volume muted seeking seekable paused played controls autoplay preload src ended readyState",d,b);e.proxyFunction("load play pause canPlayType",b,d);e.proxyEvent("timeupdate seeking seeked playing play pause loadeddata loadedmetadata canplay loadstart durationchange volumechange ended error",
b,d);return d}};if(!window.Ramp)window.Ramp={};Ramp.proxy=e})();(function(){var b=jQuery;Ramp.script={url:function(e){var c,a=RegExp(e);b("script").each(function(d,f){var e=b(f).attr("src");if(e&&e.match(a))return c=e,!1});return c},base:function(b){b=this.url(b)||"";return b.substr(0,b.lastIndexOf("/")+1)}}})();
(function(){var b=function(e,c){if(!(this instanceof b))return new b(e,c);var a=this;Ramp.dispatcher(this);this.delay=e;this.count=c||-1;this._counted=0;this._onTimeout=function(){a._counted++;a.dispatch("time",{count:a._counted,remain:a.count-a._counted});0<a.count&&a.count<a._counted+1&&(a.reset(),a.dispatch("complete"))}};Ramp.timer=b;b.prototype={reset:function(){this._counted=0;this.stop()},stop:function(){clearInterval(this._interval);this.running=this._interval=null},toggle:function(){this.running?
this.stop():this.start()},start:function(){if(!this._interval)this.running=(new Date).getTime(),this._interval=setInterval(this._onTimeout,this.delay)}}})();
(function(){var b=jQuery;if(!window.Ramp)window.Ramp={};Ramp.ui={ensureOffsetParent:function(e){var e=b(e).first(),c=e[0];if(!(c.offsetParent===c.parentNode&&c.offsetParent.offsetParent)){var a=b("<div></div>");a.css("position","relative");a.css("top",0);a.css("left",0);a.css("width","100%");a.css("height","100%");c.width&&a.width(c.width);c.height&&a.height(c.height);e.css("width","100%");e.css("height","100%");e.parent().append(a);a.append(e)}}}})();
(function(){var b=jQuery,e={delayMsec:1E3},c=function(a){if(!(this instanceof c))return new c(a);this.config=b.extend(!0,{},e,a)};Ramp.Services.Sample=c;Ramp.sample=function(a,d,b){return new Ramp.Models.Media({rampId:a,rampHost:d,service:new c(b)},d)};c.prototype={parse:function(){return c.data},load:function(a,d,f,e){setTimeout(function(){var d=b.extend(!0,{},c.mediaData);f.call(e,d)},this.config.delayMsec)},search:function(a,d,f){if(!this.data)throw"media not loaded";setTimeout(function(){var a=
b.extend(!0,{},c.searchData);d.call(f,a)},this.config.delayMsec)}};c.mediaData={metadata:{title:"Euro Contagion Risks Loom in Corporate Credit Market ",description:"Fundamentals remain strong across the board, but high-quality corporate credits are likely to outperform in a volatile environment, says Morningstar's Dave Sekera.",thumbnail:"http://publishing.ramp.com/thumbnails/cached_media/0006/0006401/0006401014/images/thumb.jpg",poster:"http://publishing.ramp.com/thumbnails/cached_media/0006/0006401/0006401014/images/thumb.jpg"},
transcodes:[{name:"default",type:"video/mp4",url:"http://videos.mozilla.org/serv/webmademovies/wtfpopcorn.mp4"},{name:"some.name",type:"video/webm",url:"http://videos.mozilla.org/serv/webmademovies/wtfpopcorn.webm"},{name:"some.name",type:"video/ogg",url:"http://videos.mozilla.org/serv/webmademovies/wtfpopcorn.ogv"}],tags:[{term:"United States",type:"place",score:19.390835,origin:"namedentity",timestamps:[44.449,170.339,196.689,217.504]},{term:"Morningstar",type:"company",score:4.843158,origin:"namedentity",
timestamps:[8.209,498.966]},{term:"Spain",type:"place",score:3.7033582,origin:"namedentity",timestamps:[283.749,300.219]},{term:"private equity",type:"unk",score:3.6826441,origin:"namedentity",timestamps:[89.619]}],captions:[{start:0,text:"Jeremy Glaser : For Morningstar, I'm Jeremy Glaser. I'm here"},{start:10.29,text:"today with our bond strategist, Dave Sekera, to get an "},{start:12.3,text:"update on the corporate credit market , and on what investors"},{start:14.69,text:""}],metaq:[]};c.searchData=
{query:"brown fox",results:[{start:10,text:[{start:10,text:"The"},{start:11,text:"quick"},{start:12,match:!0,text:"brown"},{start:13,match:!0,text:"fox"},{start:14,text:"jumps"},{start:15,text:"over"},{start:16,text:"the"},{start:17,text:"lazy"},{start:18,text:"dog"}]}]}})();
(function(){var b=jQuery,e={playlistService:"/device/services/mp2-playlist?e={e}"},c=function(a,d){if(!(this instanceof c))return new c(a,d);this.config=b.extend({},e,d);this.dispatcher=Ramp.dispatcher(a);this.dispatcher.attach(this);this.dispatcher.listen("trackchange",this._onTrackChange,this)};c.msQuotes=!0;c.rebase=!0;MetaPlayer.ramp=function(a){return c(null,a)};MetaPlayer.addPlugin("ramp",function(a){this.service=c(this.video,a)});c.parseUrl=function(a,d){var b=a.split(":");void 0==d&&(d={});
"ramp"!==b[0]?d.url=a:(d.rampHost=b[1],d.rampId=b[2]);return d};c.prototype={_onTrackChange:function(a,d){d&&("string"==typeof d&&(d=c.parseUrl(d)),d&&d.rampId&&(this.load(d),a.preventDefault()))},load:function(a){"string"==typeof a&&(a=c.parseUrl(a));if(!a.rampId)throw"invalid media id";this.mediaId=a.rampId;if(a.rampHost)this.lastHost=a.rampHost;var d=this.lastHost,f=d+this.config.playlistService.replace(/{e}/,this.mediaId);b.ajax(f,{dataType:"xml",timeout:15E3,context:this,data:{},error:function(d,
a){console.error("Load playlist error: "+a+", url: "+f)},success:function(a){a=this.parse(a);a.metadata.host=d;this.setData(a)}})},setData:function(a){this._data=a;var d=this.dispatcher;d.dispatch("metadata",a.metadata);d.dispatch("transcodes",a.transcodes);d.dispatch("captions",a.captions);d.dispatch("tags",a.tags);d.dispatch("metaq",a.metaq);d.dispatch("related",a.related)},parse:function(a){var d=this,a=b(a).find("par").toArray(),c=this.parseMedia(a.shift());b.each(a,function(a,b){c.related.push(d.parseMedia(b).metadata)});
return c},parseMedia:function(a){var d={metadata:{},transcodes:[],tags:[],captions:[],metaq:{},related:[]},f=b(a).find("video");d.metadata.title=f.attr("title");f.find("metadata meta").each(function(a,c){var f=b(c);d.metadata[f.attr("name")]=f.attr("content")||f.text()});d.transcodes.push({name:"default",type:c.resolveType(f.attr("src")),url:f.attr("src")});b(a).find("metadata[xml\\:id^=transcodes]").find("meta").each(function(a,f){var e=b(f);d.transcodes.push({name:e.attr("name"),type:e.attr("type")||
c.resolveType(e.attr("content")),url:e.attr("content")})});b(a).find("seq[xml\\:id^=jumptags]").find("ref").each(function(a,c){var f={};b(c).find("param").each(function(a,d){var c=b(d);f[c.attr("name")]=c.text()});if(f.timestamps)f.timestamps=f.timestamps.split(",");d.tags.push(f)});b(a).find("seq[xml\\:id^=metaqs]").find("ref").each(function(a,f){var e={};b(f).find("param").each(function(a,d){var f=b(d),i=f.attr("name"),f=c.deSmart(f.text());"code"==i?(i=b.parseJSON(f),b.extend(!0,e,i)):e[i]=f});
d.metaq[e.plugin]||(d.metaq[e.plugin]=[]);d.metaq[e.plugin].push(e)});a=b(a).find("smilText");d.captions=c.parseCaptions(a);return d},search:function(a,d,f){var e=this._data.metadata.searchapi;c.rebase&&(e=e.replace(/^(.*\/\/[\w.]+)/,""));var g={q:a};a?b.ajax(e,{dataType:"xml",timeout:15E3,context:this,data:g,error:function(a,d){console.error("Load search error: "+d+", url: "+e)},success:function(a){a=c.parseSearch(a);this.dispatch("search",a);d&&d.call(f,a)}}):(a={query:[],results:[]},this.dispatch("search",
a),d.call(f,a))}};c.parseSearch=function(a){var a=b(a),d={query:[],results:[]};a.find("SearchTerms Term").each(function(){d.query.push(c.deSmart(b(this).text()))});a.find("Snippets Snippet").each(function(a,e){var g=b(e),h={start:g.attr("time"),words:[]},g=g.find("T");b.each(g,function(a,d){var f=b(d);h.words.push({match:Boolean(f.find("MQ").length),start:f.attr("s"),text:c.deSmart(f.text())})});d.results.push(h)});return d};c.parseCaptions=function(a){var d=b(a).contents(),f=[],e={text:"",start:0,
offset:0},g,h=function(a,d){var h;var j=b(a);h=c.parseSeconds;var l=j.attr("begin");null!=l?h=h(l):(j=j.attr("next"),h=null!=j?h(j)+(void 0).start:void 0);g=e;g.end=h;d&&(g.text+=d);f.push(g);e={text:"",start:h,offset:e.offset+1}};d.each(function(a,b){var f=d[a].data;if(void 0===b.tagName)c.msQuotes&&(f=c.deSmart(f)),e.text+=f;else switch(b.tagName){case "smil:clear":case "clear":h(b);break;case "smil:tev":case "tev":h(b);break;case "smil:br":case "br":h(b,"<br />");break;default:throw"unsupported tag";
}});e.text&&f.push(e);return f};c.parseSeconds=function(a){var d=a.substr(-1),b=parseFloat(a);if("s"==d)return b;if("m"==d)return 60*b;if("h"==d)return 3600*b;d=0;a=a.split(":");for(b=0;b<Math.min(a.length,4);b++)d+=Math.pow(60,b)*parseFloat(a[b]);return d};c.deSmart=function(a){return a.replace(/\xC2\x92/,"\u2019")};c.resolveType=function(a){a=a.substr(a.lastIndexOf(".")+1);return"ogv"==a?"video/ogg":"m3u8"==a?"application/application.vnd.apple.mpegurl":"video/"+a}})();
(function(){var b=jQuery,e={applySources:!0,selectSource:!0,preload:!0,muted:!1,autoplay:!1,autoAdvance:!0,related:!0,loop:!1,volume:1,controls:!0},c=function(a,d){if(!(this instanceof c))return new c(a,d);this._iOS=/iPad|iPhone|iPod/i.test(navigator.userAgent);this.config=b.extend({},e,d);this._createMarkup(a)};MetaPlayer.html5=function(a,d){return c(a,d).video};MetaPlayer.addPlayer("html5",function(a){return MetaPlayer.html5(this.video,a)});c.prototype={_createMarkup:function(a){var d=b(a),c=d.find("video");
if(d.is("video")||null!=a.currentTime)c=d;0<c.length?this._iOS?(this.video=c.clone(!0,!0).appendTo(c.parent()).get(0),c.remove()):this.video=c.get(0):(a=document.createElement("video"),a.autoplay=this.config.autoplay,a.preload=this.config.preload,a.controls=this.config.controls,a.muted=this.config.muted,a.volume=this.config.volume,this.video=a,d.append(a))}}})();
(function(){var b=jQuery,e=window.flowplayer,c={autoplay:!1,preload:!0,controls:!0,swfUrl:"flowplayer-3.2.7.swf",wmode:"transparent",statusThrottleMSec:500,fpConfig:{clip:{scaling:"fit"}}},a=function(d,f,e){if(!(this instanceof a))return new a(d,f,e);this.config=b.extend(!0,{},c,e);this.dispatcher=this.config.dispatcher||Ramp.Utils.EventDispatcher();this.dispatcher.attach(this);this._iOS=/iPad|iPhone|iPod/i.test(navigator.userAgent);this.__seeking=null;this.__readyState=0;this.__ended=!1;this.__paused=
!0;this._pageSetup(d);this.__preload=this.config.preload;this.__autoplay=this.config.autoplay;this.__src=null;this._statepoll=Ramp.Timer(250);this._statepoll.listen("time",this._onPlayStatePoll,this);this._timeupdater=Ramp.Timer(250);this._timeupdater.listen("time",this._onTimeUpdate,this);var g=this;this._flowplayer.onLoad(function(){g._onLoad()});this.video=this.getInterface();Ramp.playlist?Ramp.playlist(this.video,f):this.src(f)};Ramp.flowplayer=function(d,b,c){d=a(d,b,c);d.video._player=d;return d.video};
a.prototype={_pageSetup:function(a){if(a.getCommonClip)this._flowplayer=a,a=this._flowplayer.getCommonClip(),this.preload(Boolean(a.autoBuffering)),this.autoplay(Boolean(a.autoPlay));else{var c=b.extend(!0,{clip:{autoPlay:!1,autoBuffering:!0}},this.config.fpConfig),i=b('<div class="metaplayer-video""></div>');b(a).append(i);this._flowplayer=e(i.get(0),{src:this.config.swfUrl,wmode:this.config.wmode},c)}},_onLoad:function(){if(!this._onLoadFired){this._onLoadFired=!0;var a=this;this._flowplayer.onVolume(function(){a.dispatch("volumechange")});
this._flowplayer.onMute(function(){a.dispatch("volumechange")});this._flowplayer.onUnmute(function(){a.dispatch("volumechange")});this._flowplayer.onPlaylistReplace(function(){a.dispatch("playlistChange")});this._flowplayer.onClipAdd(function(){a.dispatch("playlistChange")});this.controls(this.config.controls);this.__src&&this.src(this.__src);a.dispatch("loadstart");(this.preload()||this.autoplay())&&this.load()}},_addClipListeners:function(a){var c=this;a.onBeforeBegin(function(){return!0});a.onBegin(function(){c._flowplayer.setVolume(100);
c._flowplayer.unmute()});a.onStart(function(a){c._setReady();c._setPlaying(!0);if(c._iOS&&!c.__controls)b(c._flowplayer.getParent()).find("video").get(0).controls=!1;c.dispatch("loadeddata");c.__duration=a.duration;c.dispatch("durationchange");c.dispatch("loadedmetadata")});a.onStop(function(){});a.onFinish(function(){c.__ended=!0;c.__seeking=null;c._setPlaying(!1);c._flowplayer.stop();c.dispatch("ended")});a.onPause(function(){c._setPlaying(!1);c._setReady()});a.onResume(function(){c._setPlaying(!0);
c.dispatch("play")});a.onBeforeSeek(function(){c.dispatch("seeking");c.dispatch("timeupdate");if(c.paused())c.dispatch("seeked"),c.__seeking=null});a.onSeek(function(){c.__seeking=null;c.paused()||c.dispatch("seeked")})},_setReady:function(){4!=this.__readyState?(this.__readyState=4,this.dispatch("canplay")):(this.dispatch("seeking"),this.dispatch("seeked"))},_setPlaying:function(a){this.__paused=!a;this._statepoll.start()},load:function(){this.preload(!0);if(this.src()&&this._flowplayer.isLoaded())this._flowplayer.getClip(0).update({autoPlay:this.autoplay(),
autoBuffer:!0}),window.flashembed.__replaced&&!this.__loaded?(this._flowplayer.play(0),this.autoplay()&&this._flowplayer.play(0),this.__loaded=!0):this.autoplay()?this._flowplayer.play():this._flowplayer.startBuffering()},play:function(){this.autoplay(!0);this.__paused=!1;this.load()},pause:function(){this._flowplayer.pause()},canPlayType:function(a){var b=null;if(window.flashembed.__replaced){if(!this._video)this._video=document.createElement("video");this._iOS&&a.match(/mpegurl|m3u8/i)?b="probably":
this._video.canPlayType&&(b=this._video.canPlayType(a))}else a.match(/mp4|flv|jpg$/)&&(b="probably");return b},paused:function(){return this.__paused},duration:function(){return this.__duration},seeking:function(){return null!==this.__seeking},ended:function(){return this.__ended},currentTime:function(a){if(void 0!==a){0>a&&(a=0);if(a>this.duration)a=this.duration;this.__seeking=a;this._flowplayer.seek(a)}if(null!==this.__seeking)return this.__seeking;if(!this._flowplayer.isLoaded())return 0;var a=
(new Date).getTime(),b=this.__currentTimeCache,c=a-b;if(b&&c<this.config.statusThrottleMSec)return this.__currentTime+c/1E3;this.__currentTimeCache=a;return this.__currentTime=this._flowplayer.getStatus().time},muted:function(a){void 0!==a&&(a?this._flowplayer.mute():this._flowplayer.unmute());return this._flowplayer.getStatus().muted},volume:function(a){void 0!==a&&this._flowplayer.setVolume(100*a);return this._flowplayer.getVolume()/100},controls:function(a){if(!this._flowplayer.isLoaded()){if(void 0!==
a)this.config.controls=a;return this.config.controls}var c=this._flowplayer.getControls(),e=this._flowplayer.getPlugin("play"),g=b(this._flowplayer.getParent()).find("video").get(0);if(void 0!==a)(this.__controls=a)?(c&&c.show(),e&&e.show(),g&&(g.controls=!0)):(c&&c.hide(),e&&e.hide(),g&&(g.controls=!1));return this.__controls},preload:function(a){if(void 0!==a)this.__preload=a;return this.__preload},autoplay:function(a){if(void 0!==a)this.__autoplay=a;return this.__autoplay},loop:function(a){if(void 0!==
a)this.__loop=a;return this.__loop},src:function(a){if(void 0!==a)this.__src=a,this.__loaded=!1,a=this._flowplayer,a.isLoaded()&&(a.setClip({autoPlay:!1,autoBuffering:!1,url:this.__src}),this._addClipListeners(a.getClip(0)));return this.__src},readyState:function(a){if(void 0!==a)this.__readyState=a;return this.__readyState},getInterface:function(){var a=Ramp.Utils.Proxy.getProxyObject(this._flowplayer.getParent());Ramp.Utils.Proxy.mapProperty("duration currentTime volume muted seeking seekable paused played controls autoplay preload src ended readyState",
a,this);Ramp.Utils.Proxy.proxyFunction("load play pause canPlayType",this,a);Ramp.Utils.Proxy.proxyEvent("timeupdate seeking seeked playing play pause loadeddata loadedmetadata canplay loadstart durationchange volumechange ended ",this,a);return a},_onPlayStatePoll:function(){this._flowplayer.isPlaying()!==this.paused()&&(this._statepoll.reset(),this.paused()?(this.dispatch("pause"),this._timeupdater.reset()):(this.autoplay(!0),this.dispatch("playing"),this.dispatch("play"),this._timeupdater.start()))},
_onTimeUpdate:function(){this.dispatch("timeupdate")}}})();
