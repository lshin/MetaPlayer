/*
Copyright (c) 2011 RAMP Holdings, Inc.

Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
*/
(function(){var d=jQuery,e=function(b,a){if(!(this instanceof e))return new e(b);this._plugins=[];var c=e.layout(b);this.target=d(b).get(0);this.dom=c.base;this.video=e.proxy.getProxyObject(c.stage);this.dispatcher=e.dispatcher(this.video);this.playlist(a)};e.addPlugin=function(b,a){var c=e.prototype;if(c[b])throw"keyword unavailable: "+b;c[b]=function(){this._plugins?this._plugins.push({name:b,args:arguments,fn:a}):a.apply(this,arguments);return this}};e.addPlayer=function(b,a){var c=e.prototype;
if(c[b])throw"keyword unavailable: "+b;c[b]=function(){this.player(a.apply(this,arguments));return this}};e.prototype={player:function(b){this.video!==b&&this.video.appendChild(b);e.proxy.proxyPlayer(b,this.video);this.currentPlayer=b;return this},load:function(b){var a=this;d(this._plugins).each(function(c,b){a[b.name]=b.fn.apply(a,b.args)});this._plugins=null;this.dispatcher.dispatch("ready");b&&this.playlist.queue(b);return this}};window.MetaPlayer=e;window.MPF=e;window.Ramp=e})();
(function(){var d=jQuery,e={cssPrefix:"mp"};MetaPlayer.layout=function(b,a){this.config=d.extend(!0,{},e,a);this._iOS=/iPad|iPhone|iPod/i.test(navigator.userAgent);var c=d(b),b=c.get(0),f,i=c.find(".mp-video"),g=c.find("video"),h=null!=b.currentTime;h?(f=d("<div></div>").addClass("metaplayer").appendTo(c.parent()),f.width(c.width()),f.height(c.height())):f=c;f.addClass("metaplayer");0==i.length&&(i=d("<div></div>").addClass("mp-video"),i.appendTo(f));0<g.length&&i.append(g);h&&i.append(c);return{base:f.get(0),
stage:i.get(0)}}})();
(function(){var d=jQuery,e={applySources:!0,selectSource:!0,autoAdvance:!0,autoPlay:!0,autoBuffer:!0,related:!0,loop:!1},b=function(a,c){if(!(this instanceof b))return new b(a,c);this.config=d.extend({},e,c);this.video=a;this._haveRelated=!1;this._tracks=[];this._index=0;this.loop=this.config.loop;this.autoplay=this.config.autoPlay;this.preload=this.config.autoBuffer;this.advance=this.config.autoAdvance;this.dispatcher=MetaPlayer.dispatcher(a);this._addDataListeners(this.video);this._addMediaListeners(this.video)};
MetaPlayer.playlist=function(a,c){return b(d(a).get(0),c)};MetaPlayer.addPlugin("playlist",function(a){return MetaPlayer.playlist(this.video,a)});b.prototype={index:function(a){a=this._resolveIndex(a);if(null!=a)this._index=a,this.load(this.track());return this._index},queue:function(a){a instanceof Array||(a=[a]);var c=0==this._tracks.length,b=this;d(a).each(function(c,a){b._addTrack(a,!0)});this.dispatcher.dispatch("playlistchange");c&&this.load(this.track())},load:function(a){this.video.pause();
this.dispatcher.dispatch("trackchange",a)&&this._setSrc(a)},empty:function(){this._tracks=[];this._index=0;this.dispatcher.dispatch("playlistchange");this.dispatcher.dispatch("trackchange")},next:function(){this.index(this._index+1)},previous:function(){this.index(this._index-1)},track:function(a){void 0===a&&(a=this.index());return this._tracks[this._resolveIndex(a)]},nextTrack:function(){return this.track(this._index+1)},tracks:function(){return this._tracks},_addTrack:function(a,c){this._tracks.push(a);
c||this.dispatcher.dispatch("playlistchange")},_resolveIndex:function(a){if(null==a)return null;var c=this.tracks();0>a&&(a=c.length+a);this.loop&&(a%=c.length);return a>=c.length||0>a?null:a},_addDataListeners:function(a){a.listen("metadata",this._onMetaData,this);a.listen("transcodes",this._onTranscodes,this);a.listen("related",this._onRelated,this)},_addMediaListeners:function(){var a=this;d(this.video).bind("ended error",function(){a._onEnded()})},_onMetaData:function(a,c){var b=this.index();
"string"==typeof this._tracks[b]&&(this._tracks[b]=c)},_onRelated:function(a,c){if(!this._haveRelated&&this.config.related)this.queue(c),this._haveRelated=!0},_onTranscodes:function(a,c){var b=this,e=this.video;this.transcodes=c;var g=[],h=[];d.each(c,function(c,a){e.appendChild(b._createSource(a.url,a.type));var d=e.canPlayType(a.type);d&&("probably"==d?g.push(a.url):h.push(a.url))});var k=g.shift()||h.shift();k&&this._setSrc(k)},_setSrc:function(a){this.video.src=a;this.video.autoplay||0<this.index()?
this.video.play():this.video.preload&&this.video.load()},_createSource:function(a,c){return d("<source>").attr("type",c||"").attr("src",a)[0]},_onEnded:function(){this.advance&&(this.index()==this.tracks().length-1&&this.dispatcher.dispatch("playlistComplete"),this.next())}}})();
(function(){var d=function(e){if(e&&e.dispatcher instanceof d)return e.dispatcher;if(!(this instanceof d))return new d(e);this._listeners={};this.attach(e)};Ramp.dispatcher=d;d.Event=function(){this.defaultPrevented=this.cancelBubble=!1};d.Event.prototype={initEvent:function(d,b,a){this.type=d;this.cancelable=a},stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){if(this.cancelable)this.defaultPrevented=!0}};d.prototype={attach:function(d){if(d)d.addEventListener?MetaPlayer.proxy.proxyFunction("addEventListener removeEventListener dispatchEvent",
d,this):MetaPlayer.proxy.proxyFunction("addEventListener removeEventListener dispatchEvent",this,d),MetaPlayer.proxy.proxyFunction("listen forget dispatch",this,d),d.dispatcher=this},listen:function(d,b,a){this.addEventListener(d,function(c){b.call(a,c,c.data)})},forget:function(d,b){this.removeEventListener(d,b)},dispatch:function(d,b){var a=this.createEvent();a.initEvent(d,!0,!0);a.data=b;return this.dispatchEvent(a)},addEventListener:function(d,b){this._listeners[d]||(this._listeners[d]=[]);this._listeners[d].push(b)},
removeEventListener:function(d,b){var a=this._listeners[d]||[],c;for(c=a.length-1;0<=c;c--)a[c]==b&&a.splice(c,1)},createEvent:function(e){return document.createEvent?document.createEvent(e||"Event"):new d.Event},dispatchEvent:function(d){for(var b=this._listeners[d.type]||[],a=0;a<b.length&&!d.cancelBubble;a++)b[a].call(b[a].scope||this,d,d.data);return!d.defaultPrevented}}})();
(function(){Ramp.format={seconds:function(d){var e=function(c,a){for(var b=""+c;b.length<a;)b="0"+b;return b},b=Math.floor(d/3600),a=Math.floor(d%60),d=[e(Math.floor(d%3600/60),2),e(a,2)];b&&d.unshift(b);return d.join(":")}}})();
(function(){var d=jQuery,e={proxyProperty:function(b,a,c){d.each(b.split(/\s+/g),function(b,d){e.mapProperty(d,c,a)})},proxyFunction:function(b,a,c){d.each(b.split(/\s+/g),function(b,d){c[d]=function(){return a[d].apply(a,arguments)}})},proxyEvent:function(b,a,c){c.addEventListener||Ramp.dispatcher(c);d.each(b.split(/\s+/g),function(b,e){d(a).bind(e,function(a){if(c.dispatch)c.dispatch(a.type);else{var b=document.createEvent("Event");b.initEvent(a.type,!1,!1);c.dispatchEvent(b)}})})},mapProperty:function(b,
a,c){c||(c=a);d.each(b.split(/\s+/g),function(b,d){var g=void 0==c[d]?"_"+d:d,h;h=c[g]instanceof Function?function(){return c[g].apply(c,arguments)}:function(a){void 0!==a&&(c[g]=a);return c[g]};e.define(a,d,{get:h,set:h})})},define:function(b,a,c){try{return Object.defineProperty(b,a,c)}catch(d){}b.__defineGetter&&c.get&&b.__defineGetter__(a,c.get);c.set&&b.__defineSetter__&&b.__defineSetter__(a,c.set)},getProxyObject:function(b){b||(b=document.createElement("div"));try{return Object.defineProperty(b,
"__proptest",{}),b}catch(a){}b={parentNode:b.parentNode};try{return Object.defineProperty(b,"__proptest",{}),b}catch(c){}throw"Object.defineProperty not defined";},proxyPlayer:function(b,a){var c=Ramp.proxy.getProxyObject(a);e.mapProperty("duration currentTime volume muted seeking seekable paused played controls autoplay preload src ended readyState",c,b);e.proxyFunction("load play pause canPlayType",b,c);e.proxyEvent("timeupdate seeking seeked playing play pause loadeddata loadedmetadata canplay loadstart durationchange volumechange ended error",
b,c);return c}};if(!window.Ramp)window.Ramp={};Ramp.proxy=e})();(function(){var d=jQuery;Ramp.script={url:function(e){var b,a=RegExp(e);d("script").each(function(c,f){var e=d(f).attr("src");if(e&&e.match(a))return b=e,!1});return b},base:function(d){d=this.url(d)||"";return d.substr(0,d.lastIndexOf("/")+1)}}})();
(function(){var d=function(e,b){if(!(this instanceof d))return new d(e,b);var a=this;Ramp.dispatcher(this);this.delay=e;this.count=b||-1;this._counted=0;this._onTimeout=function(){a._counted++;a.dispatcher.dispatch("time",{count:a._counted,remain:a.count-a._counted});0<a.count&&a.count<a._counted+1&&(a.reset(),a.dispatcher.dispatch("complete"))}};Ramp.timer=d;d.prototype={reset:function(){this._counted=0;this.stop()},stop:function(){clearInterval(this._interval);this.running=this._interval=null},
toggle:function(){this.running?this.stop():this.start()},start:function(){if(!this._interval)this.running=(new Date).getTime(),this._interval=setInterval(this._onTimeout,this.delay)}}})();
(function(){var d=jQuery;if(!window.Ramp)window.Ramp={};Ramp.ui={ensureOffsetParent:function(e){var e=d(e).first(),b=e[0];if(!(b.offsetParent===b.parentNode&&b.offsetParent.offsetParent)){var a=d("<div></div>");a.css("position","relative");a.css("top",0);a.css("left",0);a.css("width","100%");a.css("height","100%");b.width&&a.width(b.width);b.height&&a.height(b.height);e.css("width","100%");e.css("height","100%");e.parent().append(a);a.append(e)}}}})();
(function(){var d=jQuery,e={},b=function(a,c){if(!(this instanceof b))return new b(a,c);this.config=d.extend({},e,c);this.dispatcher=MetaPlayer.dispatcher(a);this.dispatcher.attach(this);this.dispatcher.listen("trackchange",this._onTrackChange,this)};if(!window.Ramp)window.Ramp={};MetaPlayer.mrss=function(a){return b(null,a)};MetaPlayer.addPlugin("mrss",function(a){this.service=b(this.video,a)});b.prototype={load:function(a){d.ajax(a,{dataType:"xml",timeout:15E3,context:this,data:{},error:function(c,
b){console.error("Load playlist error: "+b+", url: "+a)},success:function(c){this.setData(this.parse(c))}})},setData:function(a){this._data=a;var c=this.dispatcher;c.dispatch("metadata",a.metadata);c.dispatch("transcodes",a.transcodes);c.dispatch("captions",a.captions);c.dispatch("tags",a.tags);c.dispatch("metaq",a.metaq);c.dispatch("related",a.related)},_onTrackChange:function(a,c){c&&(a.preventDefault(),"string"==typeof c?this.load(c):this.setData(c))},parse:function(a){var c=this,b=[],a=d(a).find("item").toArray();
d.each(a,function(a,d){b.push(c.parseItem(d))});a=b.shift();a.related=b;return a},parseItem:function(a){var c={metadata:{},transcodes:[],tags:[],captions:[],metaq:{},related:[]},a=d(a),b=a.find("media:content, content");d.each(b,function(a,b){var b=d(b),f=b.attr("codec"),e=b.attr("type")+(f?'codec="'+f+'"':"");c.transcodes.push({url:b.attr("url"),fileSize:b.attr("fileSize"),type:e,medium:b.attr("medium"),isDefault:b.attr("isDefault"),expression:b.attr("expression"),bitrate:b.attr("bitrate"),framerate:b.attr("framerate"),
samplingrate:b.attr("samplingrate"),channels:b.attr("channels"),duration:b.attr("duration"),height:b.attr("height"),width:b.attr("width"),lang:b.attr("lang"),codec:f})});c.metadata.title=a.find("media:title, title").text();c.metadata.description=a.find("media:description, description").text()||a.find("]").text();c.metadata.thumbnail=a.find("media:thumbnail, thumbnail").attr("url");return c},search:function(){throw"not implemented";}}})();
(function(){var d=jQuery,e={playlistService:"/device/services/mp2-playlist?e={e}"},b=function(a,c){if(!(this instanceof b))return new b(a,c);this.config=d.extend({},e,c);this.dispatcher=MetaPlayer.dispatcher(a);this.dispatcher.attach(this);this.dispatcher.listen("trackchange",this._onTrackChange,this)};b.msQuotes=!0;b.rebase=!0;MetaPlayer.ramp=function(a){return b(null,a)};MetaPlayer.addPlugin("ramp",function(a){this.service=b(this.video,a)});b.parseUrl=function(a,c){var b=a.split(":");void 0==c&&
(c={});"ramp"!==b[0]?c.url=a:(c.rampHost=b[1],c.rampId=b[2]);return c};b.prototype={_onTrackChange:function(a,c){c&&("string"==typeof c&&(c=b.parseUrl(c)),c&&c.rampId&&(this.load(c),a.preventDefault()))},load:function(a){"string"==typeof a&&(a=b.parseUrl(a));if(!a.rampId)throw"invalid media id";this.mediaId=a.rampId;if(a.rampHost)this.lastHost=a.rampHost;var c=this.lastHost,f=c+this.config.playlistService.replace(/{e}/,this.mediaId);d.ajax(f,{dataType:"xml",timeout:15E3,context:this,data:{},error:function(c,
a){console.error("Load playlist error: "+a+", url: "+f)},success:function(a){a=this.parse(a);a.metadata.host=c;this.setData(a)}})},setData:function(a){this._data=a;var c=this.dispatcher;c.dispatch("metadata",a.metadata);c.dispatch("transcodes",a.transcodes);c.dispatch("captions",a.captions);c.dispatch("tags",a.tags);c.dispatch("metaq",a.metaq);c.dispatch("related",a.related)},parse:function(a){var c=this,a=d(a).find("par").toArray(),b=this.parseMedia(a.shift());d.each(a,function(a,d){b.related.push(c.parseMedia(d).metadata)});
return b},parseMedia:function(a){var c={metadata:{},transcodes:[],tags:[],captions:[],metaq:{},related:[]},f=d(a).find("video");c.metadata.title=f.attr("title");f.find("metadata meta").each(function(a,b){var f=d(b);c.metadata[f.attr("name")]=f.attr("content")||f.text()});c.transcodes.push({name:"default",type:b.resolveType(f.attr("src")),url:f.attr("src")});d(a).find("metadata[xml\\:id^=transcodes]").find("meta").each(function(a,f){var e=d(f);c.transcodes.push({name:e.attr("name"),type:e.attr("type")||
b.resolveType(e.attr("content")),url:e.attr("content")})});d(a).find("seq[xml\\:id^=jumptags]").find("ref").each(function(a,b){var f={};d(b).find("param").each(function(a,c){var b=d(c);f[b.attr("name")]=b.text()});if(f.timestamps)f.timestamps=f.timestamps.split(",");c.tags.push(f)});d(a).find("seq[xml\\:id^=metaqs]").find("ref").each(function(a,f){var e={};d(f).find("param").each(function(a,c){var f=d(c),i=f.attr("name"),f=b.deSmart(f.text());"code"==i?(i=d.parseJSON(f),d.extend(!0,e,i)):e[i]=f});
c.metaq[e.plugin]||(c.metaq[e.plugin]=[]);c.metaq[e.plugin].push(e)});a=d(a).find("smilText");c.captions=b.parseCaptions(a);return c},search:function(a,c,f){var e=this._data.metadata.searchapi;b.rebase&&(e=e.replace(/^(.*\/\/[\w.]+)/,""));var g={q:a};a?d.ajax(e,{dataType:"xml",timeout:15E3,context:this,data:g,error:function(a,c){console.error("Load search error: "+c+", url: "+e)},success:function(a){a=b.parseSearch(a);this.dispatch("search",a);c&&c.call(f,a)}}):(a={query:[],results:[]},this.dispatch("search",
a),c.call(f,a))}};b.parseSearch=function(a){var a=d(a),c={query:[],results:[]};a.find("SearchTerms Term").each(function(){c.query.push(b.deSmart(d(this).text()))});a.find("Snippets Snippet").each(function(a,e){var g=d(e),h={start:g.attr("time"),words:[]},g=g.find("T");d.each(g,function(a,c){var f=d(c);h.words.push({match:Boolean(f.find("MQ").length),start:f.attr("s"),text:b.deSmart(f.text())})});c.results.push(h)});return c};b.parseCaptions=function(a){var c=d(a).contents(),f=[],e={text:"",start:0,
offset:0},g,h=function(a,c){var h;var j=d(a);h=b.parseSeconds;var l=j.attr("begin");null!=l?h=h(l):(j=j.attr("next"),h=null!=j?h(j)+(void 0).start:void 0);g=e;g.end=h;c&&(g.text+=c);f.push(g);e={text:"",start:h,offset:e.offset+1}};c.each(function(a,d){var f=c[a].data;if(void 0===d.tagName)b.msQuotes&&(f=b.deSmart(f)),e.text+=f;else switch(d.tagName){case "smil:clear":case "clear":h(d);break;case "smil:tev":case "tev":h(d);break;case "smil:br":case "br":h(d,"<br />");break;default:throw"unsupported tag";
}});e.text&&f.push(e);return f};b.parseSeconds=function(a){var c=a.substr(-1),b=parseFloat(a);if("s"==c)return b;if("m"==c)return 60*b;if("h"==c)return 3600*b;c=0;a=a.split(":");for(b=0;b<Math.min(a.length,4);b++)c+=Math.pow(60,b)*parseFloat(a[b]);return c};b.deSmart=function(a){return a.replace(/\xC2\x92/,"\u2019")};b.resolveType=function(a){a=a.substr(a.lastIndexOf(".")+1);return"ogv"==a?"video/ogg":"m3u8"==a?"application/application.vnd.apple.mpegurl":"video/"+a}})();
(function(){var d=jQuery,e={applySources:!0,selectSource:!0,preload:!0,muted:!1,autoplay:!1,autoAdvance:!0,related:!0,loop:!1,volume:1,controls:!0},b=function(a,c){if(!(this instanceof b))return new b(a,c);this._iOS=/iPad|iPhone|iPod/i.test(navigator.userAgent);this.config=d.extend({},e,c);this._createMarkup(a)};MetaPlayer.html5=function(a,c){return b(a,c).video};MetaPlayer.addPlayer("html5",function(a){return MetaPlayer.html5(this.video,a)});b.prototype={_createMarkup:function(a){var c=d(a),b=c.find("video");
if(c.is("video")||null!=a.currentTime)b=c;0<b.length?this._iOS?(this.video=b.clone(!0,!0).appendTo(b.parent()).get(0),b.remove()):this.video=b.get(0):(a=document.createElement("video"),a.autoplay=this.config.autoplay,a.preload=this.config.preload,a.controls=this.config.controls,a.muted=this.config.muted,a.volume=this.config.volume,this.video=a,c.append(a))}}})();
(function(){var d=jQuery,e=window.flowplayer,b={autoplay:!1,preload:!0,controls:!0,swfUrl:"flowplayer-3.2.7.swf",wmode:"transparent",cssName:"mp-flowplayer",statusThrottleMSec:500,fpConfig:{clip:{scaling:"fit"}}},a=function(c,f){if(!(this instanceof a))return new a(c,f);this.config=d.extend(!0,{},b,f);this.dispatcher=MetaPlayer.dispatcher(c);this._iOS=/iPad|iPhone|iPod/i.test(navigator.userAgent);this.__seeking=null;this.__readyState=0;this.__ended=!1;this.__paused=!0;this.__duration=NaN;this._pageSetup(c);
this.__preload=this.config.preload;this.__autoplay=this.config.autoplay;this.__src="";this._statepoll=Ramp.timer(250);this._statepoll.listen("time",this._onPlayStatePoll,this);this._timeupdater=Ramp.timer(250);this._timeupdater.listen("time",this._onTimeUpdate,this);var e=this;this._flowplayer.onLoad(function(){e._onLoad()});this.video=this.attach(this._flowplayer.getParent())};MetaPlayer.flowplayer=function(c,b){return a(c,b).video};MetaPlayer.addPlayer("flowplayer",function(c,b){c.getCommonClip||
(b=c,c=d("<div></div>").appendTo(this.video));return a(c,b).video});a.prototype={_pageSetup:function(a){if(a.getCommonClip)this._flowplayer=a,a=this._flowplayer.getCommonClip(),this.preload(Boolean(a.autoBuffering)),this.autoplay(Boolean(a.autoPlay));else{var a=d(a).get(0),b=d.extend(!0,{clip:{autoPlay:!1,autoBuffering:!0}},this.config.fpConfig);this._flowplayer=e(a,{src:this.config.swfUrl,wmode:this.config.wmode},b)}},_onLoad:function(){if(!this._onLoadFired){this._onLoadFired=!0;var a=this;this._flowplayer.onVolume(function(){a.dispatcher.dispatch("volumechange")});
this._flowplayer.onMute(function(){a.dispatcher.dispatch("volumechange")});this._flowplayer.onUnmute(function(){a.dispatcher.dispatch("volumechange")});this._flowplayer.onPlaylistReplace(function(){a.dispatcher.dispatch("playlistChange")});this._flowplayer.onClipAdd(function(){a.dispatcher.dispatch("playlistChange")});this.controls(this.config.controls);this.__src&&this.src(this.__src);a.dispatcher.dispatch("loadstart");(this.preload()||this.autoplay())&&this.load()}},_addClipListeners:function(a){var b=
this;a.onBeforeBegin(function(){return!0});a.onBegin(function(){b._flowplayer.setVolume(100);b._flowplayer.unmute()});a.onStart(function(a){b._setReady();b._setPlaying(!0);if(b._iOS&&!b.__controls)d(b._flowplayer.getParent()).find("video").get(0).controls=!1;b.dispatcher.dispatch("loadeddata");b.__duration=a.duration;b.dispatcher.dispatch("durationchange");b.dispatcher.dispatch("loadedmetadata")});a.onStop(function(){});a.onFinish(function(){b.__ended=!0;b.__seeking=null;b._setPlaying(!1);b._flowplayer.stop();
b.dispatcher.dispatch("ended")});a.onPause(function(){b._setPlaying(!1);b._setReady()});a.onResume(function(){b._setPlaying(!0);b.dispatcher.dispatch("play")});a.onBeforeSeek(function(){b.dispatcher.dispatch("seeking");b.dispatcher.dispatch("timeupdate");if(b.paused())b.dispatcher.dispatch("seeked"),b.__seeking=null});a.onSeek(function(){b.__seeking=null;b.paused()||b.dispatcher.dispatch("seeked")})},_setReady:function(){4!=this.__readyState?(this.__readyState=4,this.dispatcher.dispatch("canplay")):
(this.dispatcher.dispatch("seeking"),this.dispatcher.dispatch("seeked"))},_setPlaying:function(a){this.__paused=!a;this._statepoll.start()},load:function(){this.preload(!0);if(this.src()&&this._flowplayer.isLoaded())this._flowplayer.getClip(0).update({autoPlay:this.autoplay(),autoBuffer:!0}),window.flashembed.__replaced&&!this.__loaded?(this._flowplayer.play(0),this.autoplay()&&this._flowplayer.play(0),this.__loaded=!0):this.autoplay()?this._flowplayer.play():this._flowplayer.startBuffering()},play:function(){this.autoplay(!0);
this.__paused=!1;this.load()},pause:function(){this._flowplayer.pause()},canPlayType:function(a){var b=null;if(window.flashembed.__replaced){if(!this._video)this._video=document.createElement("video");this._iOS&&a.match(/mpegurl|m3u8/i)?b="probably":this._video.canPlayType&&(b=this._video.canPlayType(a))}else a.match(/mp4|flv|jpg$/)&&(b="probably");return b},paused:function(){return this.__paused},duration:function(){return this.__duration},seeking:function(){return null!==this.__seeking},ended:function(){return this.__ended},
currentTime:function(a){if(void 0!==a){0>a&&(a=0);if(a>this.duration)a=this.duration;this.__seeking=a;this._flowplayer.seek(a)}if(null!==this.__seeking)return this.__seeking;if(!this._flowplayer.isLoaded())return 0;var a=(new Date).getTime(),b=this.__currentTimeCache,d=a-b;if(b&&d<this.config.statusThrottleMSec)return this.__currentTime+d/1E3;this.__currentTimeCache=a;return this.__currentTime=this._flowplayer.getStatus().time},muted:function(a){void 0!==a&&(a?this._flowplayer.mute():this._flowplayer.unmute());
a=this._flowplayer.getStatus();return Boolean(a.muted)},volume:function(a){void 0!==a&&this._flowplayer.setVolume(100*a);return this._flowplayer.getVolume()/100},controls:function(a){if(!this._flowplayer.isLoaded()){if(void 0!==a)this.config.controls=a;return this.config.controls}var b=this._flowplayer.getControls(),e=this._flowplayer.getPlugin("play"),g=d(this._flowplayer.getParent()).find("video").get(0);if(void 0!==a)(this.__controls=a)?(b&&b.show(),e&&e.show(),g&&(g.controls=!0)):(b&&b.hide(),
e&&e.hide(),g&&(g.controls=!1));return this.__controls},preload:function(a){if(void 0!==a)this.__preload=a;return this.__preload},autoplay:function(a){if(void 0!==a)this.__autoplay=a;return this.__autoplay},loop:function(a){if(void 0!==a)this.__loop=a;return this.__loop},src:function(a){if(void 0!==a)this.__src=a,this.__loaded=!1,a=this._flowplayer,a.isLoaded()&&(a.setClip({autoPlay:!1,autoBuffering:!1,url:this.__src}),this._addClipListeners(a.getClip(0)));return this.__src},readyState:function(a){if(void 0!==
a)this.__readyState=a;return this.__readyState},attach:function(a){a=MetaPlayer.proxy.getProxyObject(a);this.dispatcher.attach(a);MetaPlayer.proxy.proxyPlayer(this,a);return a},_onPlayStatePoll:function(){this._flowplayer.isPlaying()!==this.paused()&&(this._statepoll.reset(),this.paused()?(this.dispatcher.dispatch("pause"),this._timeupdater.reset()):(this.autoplay(!0),this.dispatcher.dispatch("playing"),this.dispatcher.dispatch("play"),this._timeupdater.start()))},_onTimeUpdate:function(){this.dispatcher.dispatch("timeupdate")}}})();
