<!DOCTYPE html>
<html>
<head>

    <title>Flowplayer Plugin Test | Metaplayer</title>

    <style>
        #target {
            width: 300px;
            height: 150px;
            background:  #333;
            position: fixed;
            top: 10px; right: 10px;
        }
        video {
            width: 100%;
            height: 100%;
        }
    </style>

    <!--Dependency: jQuery-->
    <script src="../../../external/jquery/jquery-1.6.2.js" type="text/javascript"></script>

    <!--Dependency: OKJS -->
    <script src="../../../external/okjs/ok.js" type="text/javascript"></script>

    <!-- Unit CSS -->
    <link href="../../unit/unit.css" rel="stylesheet" type="text/css">

    <!-- Unit : Player API -->
    <script src="../../unit/player/unit.player.js" type="text/javascript"></script>

    <!-- Core: Ramp -->
    <script src="../../ramp.js"></script>
    <script src="../../services/smil/service.smil.js"></script>
    <script src="../../utils/util.event.js"></script>
    <script src="../../utils/util.proxy.js"></script>
    <script src="../../utils/util.script.js"></script>
    <script src="../../utils/util.timer.js"></script>

    <!--Dependency: Flowplayer-->
    <script src="../../../external/flowplayer/flowplayer-3.2.6.min.js"></script>

    <!-- Media Plugin: Flowplayer -->
    <script src="player.flowplayer.js"></script>

    <script type="text/javascript">

        var unit = okjs({
            exceptions: 0, // enable for debugging
            verbose: true
        });

        var harness = PlayerUnit();

        var ramp, player, media;

        unit.test("ramp setup", function () {
            player = $f("target", "../../../external/flowplayer/flowplayer-3.2.7.swf",
                    {
                        clip: {
                            autoPlay: false,
                            autoBuffering: false,
                            url: "http://pseudo01.hddn.com/vod/demo.flowplayervod/flowplayer-700.flv"
                        },
                        plugins: {
                            controls: {

                                autoHide: false
                            }
                        }
                    });
        });

        unit.test("harness init", function () {
            media = Ramp.Players.FlowplayerLoader( player, {preload: false, autoplay: false} );
            harness.media = media;
            unit.nequal( harness.media, null, "have video element");
        });

        harness.addTests(unit);

        $( function () {
            unit.start();
        });
    </script>
</head>
<body>

<h3>Unit Test &raquo;Metaplayer &raquo; Flowplayer Plugin</h3>

<div id='target'></div>

</body>
</html>
