/*
 * popcorn.js
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 *
 * IE8 Support
 * Copyright 2011, RAMP Inc
 */
(function(o,p){function G(a,c){return function(){if(b.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(d){b.plugin.errors.push({plugin:c,thrown:d,source:a.toString()}),this.trigger("error",b.plugin.errors)}}}function y(a){var a="string"===typeof a?a:[a.language,a.region].join("-"),b=a.split("-");return{iso6391:a,language:b[0]||"",region:b[1]||""}}if(Object.defineProperty){var t=Array.prototype,z=Object.prototype,A=t.forEach,B=t.slice,v=z.hasOwnProperty,C=z.toString,
H=o.Popcorn,w=/^(#([\w\-\_\.]+))$/,u=[],D=!1,r={hash:{},apis:{}},E=function(){return o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||o.msRequestAnimationFrame||function(a){o.setTimeout(a,16)}}(),F=function(a){for(var c=a.media.currentTime,d=a.options.frameAnimation,f=a.data.disabled,e=a.data.trackEvents,g=e.animating,i=e.startIndex,m=b.registryByName,h=0,l,k,i=Math.min(i+1,e.byStart.length-2);0<i&&e.byStart[i];){h=e.byStart[i];k=(l=h._natives)&&
l.type;if(!l||m[k]||a[k])if(h.start<=c&&h.end>c&&-1===b.indexOf(f,k)){if(!h._running)h._running=!0,l.start.call(a,null,h),d&&h&&h._running&&h.natives.frame&&l.frame.call(a,null,h,c)}else if(!0===h._running)h._running=!1,l.end.call(a,null,h),d&&h._natives.frame&&(h=b.indexOf(g,h),0<=h&&g.splice(h,1));i--}},b=function(a,c){return new b.p.init(a,c||null)};b.version="@VERSION";b.isSupported=!0;b.instances=[];b.p=b.prototype={init:function(a,c){var d;if("function"===typeof a)if("interactive"===p.readyState||
"complete"===p.readyState)a(p,b);else{if(u.push(a),!D){D=!0;var f=function(){p.removeEventListener("DOMContentLoaded",f,!1);for(var a=0,c=u.length;a<c;a++)u[a].call(p,b);u=null};p.addEventListener("DOMContentLoaded",f,!1)}}else{this.media=(d=w.exec(a))&&d.length&&d[2]?p.getElementById(d[2]):a;this[this.media.nodeName&&this.media.nodeName.toLowerCase()||"video"]=this.media;b.instances.push(this);this.options=c||{};this.isDestroyed=!1;this.data={timeUpdate:b.nop,disabled:[],events:{},hooks:{},history:[],
state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}};var e=function(a){var c;2<=a.media.readyState?(c=a.media.duration,c=c!=c?Number.MAX_VALUE:c+1,b.addTrackEvent(a,{start:c,end:c}),a.options.frameAnimation?(a.data.timeUpdate=function(){b.timeUpdate(a,{});a.trigger("timeupdate");!a.isDestroyed&&E(a.data.timeUpdate)},!a.isDestroyed&&E(a.data.timeUpdate)):(a.data.timeUpdate=function(c){b.timeUpdate(a,
c)},a.isDestroyed||a.media.addEventListener("timeupdate",a.data.timeUpdate,!1))):o.setTimeout(function(){e(a)},1)};e(this);return this}}};b.p.init.prototype=b.p;b.indexOf=function(a,c,b){if(a.indexOf instanceof Function)return a.indexOf(c,b);for(b=b||0;b<a.length;b++)if(a[b]===c)return b;return-1};b.createEvent=function(a){return p.createEvent?p.createEvent(a):{type:null,target:null,currentTarget:null,cancelable:!1,bubbles:!1,initEvent:function(a){this.type=a},stopPropagation:function(){},stopImmediatePropagation:function(){}}};
b.forEach=function(a,b,d){if(!a||!b)return{};var d=d||this,f,e;if(A&&a.forEach===A)return a.forEach(b,d);if("[object NodeList]"===C.call(a)){for(f=0,e=a.length;f<e;f++)b.call(d,a[f],f,a);return a}for(f in a)v.call(a,f)&&b.call(d,a[f],f,a);return a};b.extend=function(a){var c=a,d=B.call(arguments,1);b.forEach(d,function(a){for(var b in a)c[b]=a[b]});return c};b.extend(b,{noConflict:function(a){if(a)o.Popcorn=H;return b},error:function(a){throw Error(a);},guid:function(a){b.guid.counter++;return(a?
a:"")+(+new Date+b.guid.counter)},sizeOf:function(a){var b=0,d;for(d in a)b++;return b},isArray:Array.isArray||function(a){return"[object Array]"===C.call(a)},nop:function(){},position:function(a){var a=a.getBoundingClientRect(),c={},d=p.documentElement,f=p.body,e,g,i;e=d.clientTop||f.clientTop||0;g=d.clientLeft||f.clientLeft||0;i=o.pageYOffset&&d.scrollTop||f.scrollTop;d=o.pageXOffset&&d.scrollLeft||f.scrollLeft;e=Math.ceil(a.top+i-e);g=Math.ceil(a.left+d-g);for(var m in a)c[m]=Math.round(a[m]);
return b.extend({},c,{top:e,left:g})},disable:function(a,c){var d=a.data.disabled;-1===b.indexOf(d,c)&&d.push(c);F(a);return a},enable:function(a,c){var d=a.data.disabled,f=b.indexOf(d,c);-1<f&&d.splice(f,1);F(a);return a},destroy:function(a){var b=a.data.events,d,f,e;for(f in b){d=b[f];for(e in d)delete d[e];b[f]=null}if(!a.isDestroyed)a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,!1),a.isDestroyed=!0}});b.guid.counter=1;b.extend(b.p,function(){var a={};b.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),
function(c){a[c]=function(a){if("function"===typeof this.media[c]){if(null!=a&&/play|pause/.test(c))this.media.currentTime=b.util.toSeconds(a);this.media[c]();return this}return null!=a?(this.media[c]=a,this):this.media[c]}});return a}());b.forEach("enable disable".split(" "),function(a){b.p[a]=function(c){return b[a](this,c)}});b.extend(b.p,{roundTime:function(){return-~this.media.currentTime},exec:function(a,c){b.addTrackEvent(this,{start:a,end:a+1,_running:!1,_natives:{start:c||b.nop,end:b.nop,
type:"exec"}});return this},mute:function(a){a=null==a||!0===a?"muted":"unmuted";if("unmuted"===a)this.media.muted=!1,this.media.volume=this.data.state.volume;if("muted"===a)this.data.state.volume=this.media.volume,this.media.muted=!0;this.trigger(a);return this},unmute:function(a){return this.mute(null==a?!1:!a)},position:function(){return b.position(this.media)},toggle:function(a){return b[-1<b.indexOf(this.data.disabled,a)?"enable":"disable"](this,a)},defaults:function(a,c){if(b.isArray(a))return b.forEach(a,
function(a){for(var b in a)this.defaults(b,a[b])},this),this;if(!this.options.defaults)this.options.defaults={};this.options.defaults[a]||(this.options.defaults[a]={});b.extend(this.options.defaults[a],c);return this}});b.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};
b.Events.Natives=b.Events.UIEvents+" "+b.Events.MouseEvents+" "+b.Events.Events;r.apiTypes=["UIEvents","MouseEvents","Events"];(function(a,c){for(var d=r.apiTypes,f=a.Natives.split(/\s+/g),e=0,g=f.length;e<g;e++)c.hash[f[e]]=!0;b.forEach(d,function(b){c.apis[b]={};for(var d=a[b].split(/\s+/g),f=d.length,e=0;e<f;e++)c.apis[b][d[e]]=!0})})(b.Events,r);b.events={isNative:function(a){return!!r.hash[a]},getInterface:function(a){if(!b.events.isNative(a))return!1;for(var c=r.apiTypes,d=r.apis,f=0,e=c.length,
g,i;f<e;f++)if(i=c[f],d[i][a]){g=i;break}return g},all:b.Events.Natives.split(/\s+/g),fn:{trigger:function(a,c){var d;if(this.data.events[a]&&b.sizeOf(this.data.events[a])){if(d=b.events.getInterface(a))return d=b.createEvent(d),d.initEvent(a,!0,!0,o,1),this.media.dispatchEvent(d),this;b.forEach(this.data.events[a],function(a){a.call(this,c)},this)}return this},listen:function(a,c){var d=this,f=!0,e=b.events.hooks[a],g;this.data.events[a]||(this.data.events[a]={},f=!1);if(e){e.add&&e.add.call(this,
{},c);if(e.bind)a=e.bind;e.handler&&(g=c,c=function(a){e.handler.call(d,a,g)});f=!0;this.data.events[a]||(this.data.events[a]={},f=!1)}this.data.events[a][c.name||c.toString()+b.guid()]=c;!f&&-1<b.indexOf(b.events.all,a)&&this.media.addEventListener(a,function(c){b.forEach(d.data.events[a],function(a){"function"===typeof a&&a.call(d,c)})},!1);return this},unlisten:function(a,b){if(this.data.events[a]&&this.data.events[a][b])return delete this.data.events[a][b],this;this.data.events[a]=null;return this}},
hooks:{canplayall:{bind:"canplaythrough",add:function(a,b){var d=!1;this.media.readyState&&(b.call(this,a),d=!0);this.data.hooks.canplayall={fired:d}},handler:function(a,b){if(!this.data.hooks.canplayall.fired)b.call(this,a),this.data.hooks.canplayall.fired=!0}}}};b.forEach(["trigger","listen","unlisten"],function(a){b.p[a]=b.events.fn[a]});b.addTrackEvent=function(a,c){c&&c._natives&&c._natives.type&&a.options.defaults&&a.options.defaults[c._natives.type]&&(c=b.extend({},a.options.defaults[c._natives.type],
c));if(c._natives)c._id=!c.id?b.guid(c._natives.type):c.id,a.data.history.push(c._id);c.start=b.util.toSeconds(c.start,a.options.framerate);c.end=b.util.toSeconds(c.end,a.options.framerate);var d=a.data.trackEvents.byStart,f=a.data.trackEvents.byEnd,e;for(e=d.length-1;0<=e;e--)if(c.start>=d[e].start){d.splice(e+1,0,c);break}for(d=f.length-1;0<=d;d--)if(c.end>f[d].end){f.splice(d+1,0,c);break}if(c._natives&&(b.registryByName[c._natives.type]||a[c._natives.type]))if(f=a.media.currentTime,c.end>f&&c.start<=
f&&-1===b.indexOf(a.data.disabled,c._natives.type))c._running=!0,c._natives.start.call(a,null,c),a.options.frameAnimation&&c._natives.frame&&(a.data.trackEvents.animating.push(c),c._natives.frame.call(a,null,c,f));e<=a.data.trackEvents.startIndex&&c.start<=a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.startIndex++;d<=a.data.trackEvents.endIndex&&c.end<a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.endIndex++;this.timeUpdate(a,null,!0);c._id&&b.addTrackEvent.ref(a,c)};b.addTrackEvent.ref=
function(a,b){a.data.trackRefs[b._id]=b;return a};b.removeTrackEvent=function(a,c){var d=a.data.history.length,f=0,e=[],g=[],i=[],m=[];b.forEach(a.data.trackEvents.byStart,function(b,d){b._id||(e.push(a.data.trackEvents.byStart[d]),g.push(a.data.trackEvents.byEnd[d]));b._id&&(b._id!==c&&(e.push(a.data.trackEvents.byStart[d]),g.push(a.data.trackEvents.byEnd[d])),b._id===c&&(f=d,b._natives._teardown&&b._natives._teardown.call(a,b)))});a.data.trackEvents.animating.length&&b.forEach(a.data.trackEvents.animating,
function(b,d){b._id||i.push(a.data.trackEvents.animating[d]);b._id&&b._id!==c&&i.push(a.data.trackEvents.animating[d])});f<=a.data.trackEvents.startIndex&&a.data.trackEvents.startIndex--;f<=a.data.trackEvents.endIndex&&a.data.trackEvents.endIndex--;a.data.trackEvents.byStart=e;a.data.trackEvents.byEnd=g;a.data.trackEvents.animating=i;for(var h=0;h<d;h++)a.data.history[h]!==c&&m.push(a.data.history[h]);a.data.history=m;b.removeTrackEvent.ref(a,c)};b.removeTrackEvent.ref=function(a,b){delete a.data.trackRefs[b];
return a};b.getTrackEvents=function(a){for(var b=[],a=a.data.trackEvents.byStart,d=a.length,f=0,e;f<d;f++)e=a[f],e._id&&b.push(e);return b};b.getTrackEvents.ref=function(a){return a.data.trackRefs};b.getTrackEvent=function(a,b){return a.data.trackRefs[b]};b.getTrackEvent.ref=function(a,b){return a.data.trackRefs[b]};b.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};b.timeUpdate=function(a,c){var d=a.media.currentTime,f=a.data.trackEvents.previousUpdateTime,e=a.data.trackEvents,
g=e.animating,i=e.endIndex,m=e.startIndex,h=0,l=b.registryByName,k,n;if(!this.__counter)this.__counter=1;10>this.__counter&&console.log("on timeupdate ",d,e,this.__counter++);if(f<=d){for(;e.byEnd[i]&&e.byEnd[i].end<=d;)if(k=e.byEnd[i],n=(f=k._natives)&&f.type,!f||l[n]||a[n]){if(!0===k._running)k._running=!1,f.end.call(a,c,k);i++}else{b.removeTrackEvent(a,k._id);return}for(;e.byStart[m]&&e.byStart[m].start<=d;)if(k=e.byStart[m],n=(f=k._natives)&&f.type,!f||l[n]||a[n]){if(k.end>d&&!1===k._running&&
-1===b.indexOf(a.data.disabled,n))k._running=!0,f.start.call(a,c,k),a.options.frameAnimation&&k&&k._running&&k._natives.frame&&g.push(k);m++}else{b.removeTrackEvent(a,k._id);return}if(a.options.frameAnimation)for(;h<g.length;)l=g[h],l._running?(l._natives.frame.call(a,c,l,d),h++):g.splice(h,1)}else if(f>d){for(;e.byStart[m]&&e.byStart[m].start>d;)if(k=e.byStart[m],n=(f=k._natives)&&f.type,!f||l[n]||a[n]){if(!0===k._running)k._running=!1,f.end.call(a,c,k);m--}else{b.removeTrackEvent(a,k._id);return}for(;e.byEnd[i]&&
e.byEnd[i].end>d;)if(k=e.byEnd[i],n=(f=k._natives)&&f.type,!f||l[n]||a[n]){if(k.start<=d&&!1===k._running&&-1===b.indexOf(a.data.disabled,n))k._running=!0,f.start.call(a,c,k),a.options.frameAnimation&&k&&k._running&&k._natives.frame&&g.push(k);i--}else{b.removeTrackEvent(a,k._id);return}if(a.options.frameAnimation)for(;h<g.length;)l=g[h],l._running?(l._natives.frame.call(a,c,l,d),h++):g.splice(h,1)}e.endIndex=i;e.startIndex=m;e.previousUpdateTime=d};b.extend(b.p,{getTrackEvents:function(){return b.getTrackEvents.call(null,
this)},getTrackEvent:function(a){return b.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return b.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){b.removeTrackEvent.call(null,this,a);return this},removePlugin:function(a){b.removePlugin.call(null,this,a);return this},timeUpdate:function(a){b.timeUpdate.call(null,this,a);return this},destroy:function(){b.destroy.call(null,this);return this}});b.manifest={};b.registry=[];b.registryByName={};b.plugin=function(a,c,d){if(0<=
b.indexOf(b.protect.natives,a.toLowerCase()))b.error("'"+a+"' is a protected function name");else{var f=["start","end"],e={},g="function"===typeof c,i=["_setup","_teardown","start","end","frame"],m=function(a,c){a=a||b.nop;c=c||b.nop;return function(){a.apply(this,arguments);c.apply(this,arguments)}};b.manifest[a]=d=d||c.manifest||{};b.forEach(i,function(d){c[d]=G(c[d]||b.nop,a)});var h=function(c,e){if(!e)return this;var g=e._natives={},h="",j,l;b.extend(g,c);e._natives.type=a;e._running=!1;g.start=
g.start||g["in"];g.end=g.end||g.out;g._teardown=m(function(){var a=B.call(arguments);a.unshift(null);a[1]._running&&g.end.apply(this,a)},g._teardown);j=this.options.defaults&&this.options.defaults[e._natives&&e._natives.type];e.compose=e.compose&&e.compose.split(" ")||[];e.effect=e.effect&&e.effect.split(" ")||[];e.compose=e.compose.concat(e.effect);b.forEach(e.compose,function(a){h=b.compositions[a]||{};b.forEach(i,function(a){g[a]=m(g[a],h[a])})});e._natives.manifest=d;if(!("start"in e))e.start=
e["in"]||0;if(!("end"in e))e.end=e.out||this.duration()||Number.MAX_VALUE;l=j?b.extend({},j,e):e;if(!l.target)j="options"in d&&d.options,l.target=j&&"target"in j&&j.target;e._natives._setup&&e._natives._setup.call(this,l);b.addTrackEvent(this,b.extend(l,e));b.forEach(c,function(a,c){"type"!==c&&-1===b.indexOf(f,c)&&this.listen(c,a)},this);return this};e[a]=function(a){return h.call(this,g?c.call(this,a):c,a)};b.extend(b.p,e);var l={fn:e[a],definition:c,base:c,parents:[],name:a};b.registry.push(b.extend(e,
l,{type:a}));b.registryByName[a]=l;return e}};b.plugin.errors=[];b.plugin.debug=!1;b.removePlugin=function(a,c){if(!c){c=a;a=b.p;if(0<=b.indexOf(b.protect.natives,c.toLowerCase())){b.error("'"+c+"' is a protected function name");return}var d=b.registry.length,f;for(f=0;f<d;f++)if(b.registry[f].name===c){b.registry.splice(f,1);delete b.registryByName[c];delete b.manifest[c];delete a[c];return}}d=a.data.trackEvents.byStart;f=a.data.trackEvents.byEnd;var e=a.data.trackEvents.animating,g,i;for(g=0,i=
d.length;g<i;g++)d[g]&&d[g]._natives&&d[g]._natives.type===c&&f[g]&&f[g]._natives&&f[g]._natives.type===c&&(d[g]._natives._teardown&&d[g]._natives._teardown.call(a,d[g]),d.splice(g,1),f.splice(g,1),g--,i--,a.data.trackEvents.startIndex<=g&&(a.data.trackEvents.startIndex--,a.data.trackEvents.endIndex--));for(g=0,i=e.length;g<i;g++)e[g]&&e[g]._natives&&e[g]._natives.type===c&&(e.splice(g,1),g--,i--)};b.compositions={};b.compose=function(a,c,d){b.manifest[a]=d||c.manifest||{};b.compositions[a]=c};b.plugin.effect=
b.effect=b.compose;b.parsers={};b.parser=function(a,c,d){if(0<=b.indexOf(b.protect.natives,a.toLowerCase()))b.error("'"+a+"' is a protected function name");else if("function"===typeof c&&!d&&(d=c,c=""),!("function"!==typeof d||"string"!==typeof c)){var f={};f[a]=function(a,f){if(!a)return this;var i=this;b.xhr({url:a,dataType:c,success:function(a){var b,c,e=0,a=d(a).data||[];if(b=a.length){for(;e<b;e++){c=a[e];for(var n in c)if(v.call(c,n)&&i[n])i[n](c[n])}f&&f()}}});return this};b.extend(b.p,f);
return f}};b.player=function(a,c){var c=c||{},d;b[a]=b[a]||function(a,d,g){var g=g||{},i=new Date/1E3,m=i,h=0,l=0,k=1,n=!1,o={},q=p.getElementById(w.exec(a)&&w.exec(a)[2])||p.getElementById(a)||a,j={};p.attachEvent&&(j=q||p.createElement("div"));for(var s in q){if(j===q)break;"object"===typeof q[s]?j[s]=q[s]:"function"===typeof q[s]?j[s]=function(a){return"length"in q[a]&&!q[a].call?q[a]:function(){return q[a].apply(q,arguments)}}(s):b.player.defineProperty(j,s,{get:function(a){return function(){return q[a]}}(s),
set:b.nop,configurable:!0})}var r=function(){i=new Date/1E3;j.paused||(j.currentTime+=i-m,j.dispatchEvent("timeupdate"),setTimeout(r,10));m=i};j.play=function(){this.paused=!1;4<=j.readyState&&(m=new Date/1E3,j.dispatchEvent("play"),r())};j.pause=function(){this.paused=!0;j.dispatchEvent("pause")};b.player.defineProperty(j,"readyState",{get:function(){return l},set:function(a){return l=a},configurable:!0});b.player.defineProperty(j,"currentTime",{get:function(){return h},set:function(a){h=+a;j.dispatchEvent("timeupdate");
return h},configurable:!0});b.player.defineProperty(j,"volume",{get:function(){return k},set:function(a){k=+a;j.dispatchEvent("volumechange");return k},configurable:!0});b.player.defineProperty(j,"muted",{get:function(){return n},set:function(a){n=+a;j.dispatchEvent("volumechange");return n},configurable:!0});j.addEventListener=function(a,b){o[a]||(o[a]=[]);o[a].push(b);return b};j.dispatchEvent=function(a){var c,d=this,e=a.type;if(!e&&(e=a,a=b.events.getInterface(e)))c=b.createEvent(a),c.initEvent(e,
!0,!0,window,1);b.forEach(o[e],function(a){a.call(d,c,d)})};j.src=d||"";j.readyState=0;j.duration=0;j.paused=!0;j.ended=0;c._setup?c._setup.call(j,g):(j.readyState=4,j.dispatchEvent("load"),j.dispatchEvent("loadeddata"));j.addEventListener("load",function(){j.currentTime=h;j.volume=k;j.muted=n});j.addEventListener("loadeddata",function(){!j.paused&&j.play()});return new b.p.init(j,g)}};b.player.defineProperty=Object.defineProperty||function(a,c,d){a.__defineGetter__(c,d.get||b.nop);a.__defineSetter__(c,
d.set||b.nop)};var I=/\?/,J={url:"",data:"",dataType:"",success:b.nop,type:"GET",async:!0,xhr:function(){return new o.XMLHttpRequest}};b.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&("jsonp"===a.dataType||"script"===a.dataType))b.xhr.getJSONP(a.url,a.success,"script"===a.dataType);else if(a=b.extend({},J,a),a.ajax=a.xhr(),a.ajax){if("GET"===a.type&&a.data)a.url+=(I.test(a.url)?"&":"?")+a.data,a.data=null;a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||
null);return b.xhr.httpData(a)}};b.xhr.httpData=function(a){var b,d=null,f,e=null;a.ajax.onreadystatechange=function(){if(4===a.ajax.readyState){try{d=JSON.parse(a.ajax.responseText)}catch(g){}b={xml:a.ajax.responseXML,text:a.ajax.responseText,json:d};if(!b.xml||!b.xml.documentElement){b.xml=null;try{if(f=new DOMParser,e=f.parseFromString(a.ajax.responseText,"text/xml"),!e.getElementsByTagName("parsererror").length)b.xml=e}catch(i){}}a.dataType&&(b=b[a.dataType]);a.success.call(a.ajax,b)}};return b};
b.xhr.getJSONP=function(a,c,d){var f=p.head||p.getElementsByTagName("head")[0]||p.documentElement,e=p.createElement("script"),g=a.split("?")[1],i=!1,m=[],h,l;g&&!d&&(m=g.split("&"));m.length&&(l=m[m.length-1].split("="));h=m.length?l[1]?l[1]:l[0]:"jsonp";!g&&!d&&(a+="?callback="+h);h&&!d&&(window[h]&&(h=b.guid(h)),window[h]=function(a){c&&c(a);i=!0},a=a.replace(l.join("="),l[0]+"="+h));e.onload=function(){d&&c&&c();i&&delete window[h];f.removeChild(e)};e.src=a;f.insertBefore(e,f.firstChild)};b.getJSONP=
b.xhr.getJSONP;b.getScript=b.xhr.getScript=function(a,c){return b.xhr.getJSONP(a,c,!0)};b.util={toSeconds:function(a,c){var d=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,f,e,g;if("number"===typeof a)return a;"string"===typeof a&&!d.test(a)&&b.error("Invalid time format");d=a.split(":");f=d.length-1;e=d[f];-1<b.indexOf(e,";")&&(e=e.split(";"),g=0,c&&"number"===typeof c&&(g=parseFloat(e[1],10)/c),d[f]=parseInt(e[0],10)+g);f=d[0];return{1:parseFloat(f,10),2:60*parseInt(f,10)+parseFloat(d[1],10),3:3600*parseInt(f,
10)+60*parseInt(d[1],10)+parseFloat(d[2],10)}[d.length||1]}};var x=y(o.navigator.userLanguage||o.navigator.language);b.locale={get:function(){return x},set:function(a){x=y(a);b.locale.broadcast();return x},broadcast:function(a){for(var c=b.instances,d=c.length,f=0,e,a=a||"locale:changed";f<d;f++)e=c[f],a in e.data.events&&e.trigger(a)}};b.p.cue=b.p.exec;b.protect={natives:function(){var a,c=[];if(Object.keys)c=Object.keys(b.p);else for(a in b.p)v.call(b.p,a)&&c.push(a);return c.join(",").toLowerCase().split(",")}()};
o.Popcorn=b}else{o.Popcorn={isSupported:!1};for(t="forEach extend effects error guid sizeOf isArray nop position disable enable destroy addTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect parser xhr getJSONP getScript".split(/\s+/);t.length;)o.Popcorn[t.shift()]=function(){}}})(window,window.document);
